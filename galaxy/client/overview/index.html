<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Overview - UFO³ Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Overview";
        var mkdocs_page_input_path = "galaxy/client/overview.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> UFO³ Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../choose_path/">Choose Your Path</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../project_directory_structure/">Project Directory Structure</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../getting_started/quick_start_galaxy/">Quick Start (UFO³ Agent Galaxy)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../getting_started/quick_start_ufo2/">Quick Start (UFO²)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../getting_started/quick_start_linux/">Quick Start (Linux Agent)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../getting_started/quick_start_mobile/">Quick Start (Mobile Agent)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../getting_started/migration_ufo2_to_galaxy/">Migration UFO² → UFO³</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../getting_started/more_guidance/">More Guidance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Configuration & Setup</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Configuration System</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/system/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/system/agents_config/">Agent Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/system/system_config/">System Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/system/rag_config/">RAG Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/system/prices_config/">Pricing Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/system/third_party_config/">Third-Party Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/system/mcp_reference/">MCP Reference</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/system/migration/">Migration Guide</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/system/extending/">Extending Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Galaxy Configuration</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../configuration/system/galaxy_devices/">Devices</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../configuration/system/galaxy_constellation/">Constellation</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../configuration/system/galaxy_agent/">Agent</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Model Setup</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/openai/">OpenAI</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/azure_openai/">Azure OpenAI</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/operator/">OpenAI CUA (Operator)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/gemini/">Gemini</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/claude/">Claude</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/qwen/">Qwen</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/deepseek/">DeepSeek</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/ollama/">Ollama</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../configuration/models/custom_model/">Custom Model</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">UFO³ Agent Galaxy</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../webui/">WebUI</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Galaxy Client</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Overview</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#related-documentation">Related Documentation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#the-complete-path-from-user-request-to-device-execution">The Complete Path: From User Request to Device Execution</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#1-user-interaction-layer-optional">1. User Interaction Layer (Optional)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#2-session-management-layer-galaxyclient">2. Session Management Layer (GalaxyClient)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#3-device-coordination-layer-constellationclient">3. Device Coordination Layer (ConstellationClient)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#4-connection-management-layer-devicemanager">4. Connection Management Layer (DeviceManager)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#5-protocol-layer-aip">5. Protocol Layer (AIP)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#component-responsibilities">Component Responsibilities</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#constellationclient-the-device-coordination-facade">ConstellationClient: The Device Coordination Facade</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#devicemanager-the-connection-management-engine">DeviceManager: The Connection Management Engine</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#galaxyclient-session-management-wrapper">GalaxyClient: Session Management Wrapper</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#typical-workflow-example">Typical Workflow Example</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#scenario-processing-a-multi-device-task">Scenario: Processing a Multi-Device Task</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#relationships-with-other-system-components">Relationships with Other System Components</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#depends-on-agent-server-for-message-routing">Depends on Agent Server for Message Routing</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#used-by-constellationagent-for-task-planning">Used by ConstellationAgent for Task Planning</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#coordinates-with-taskconstellationorchestrator-for-dag-execution">Coordinates with TaskConstellationOrchestrator for DAG Execution</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#collaborates-with-device-agents-for-task-execution">Collaborates with Device Agents for Task Execution</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#unified-communication-through-aip-protocol">Unified Communication through AIP Protocol</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configuration-and-deployment">Configuration and Deployment</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#device-configuration">Device Configuration</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#development-vs-production-environment">Development vs Production Environment</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#detailed-component-documentation">Detailed Component Documentation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../constellation_client/">ConstellationClient</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../device_manager/">DeviceManager</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../components/">Components</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../aip_integration/">AIP Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../galaxy_client/">GalaxyClient</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Agent Registration</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../agent_registration/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../agent_registration/agent_profile/">Agent Profile</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../agent_registration/device_registry/">Device Registry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../agent_registration/registration_flow/">Registration Flow</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Task Constellation (DAG)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation/task_star/">TaskStar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation/task_star_line/">TaskStarLine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation/task_constellation/">TaskConstellation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation/constellation_editor/">ConstellationEditor</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Constellation Agent</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_agent/state/">State Machine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_agent/strategy/">Strategy Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_agent/command/">MCP Commands</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Constellation Orchestrator</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_orchestrator/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_orchestrator/event_driven_coordination/">Event-Driven Coordination</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_orchestrator/asynchronous_scheduling/">Asynchronous Scheduling</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_orchestrator/safe_assignment_locking/">Safe Assignment Locking</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_orchestrator/consistency_guarantees/">Consistency Guarantees</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_orchestrator/batched_editing/">Batched Editing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_orchestrator/constellation_manager/">Constellation Manager</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../constellation_orchestrator/api_reference/">API Reference</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Observer System</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../observer/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../observer/event_system/">Event System</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../observer/progress_observer/">Progress Observer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../observer/agent_output_observer/">Agent Output Observer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../observer/synchronizer/">Synchronizer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../observer/metrics_observer/">Metrics Observer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../observer/visualization_observer/">Visualization Observer</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Evaluation & Logging</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../evaluation/trajectory_report/">Trajectory Report</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../evaluation/performance_metrics/">Performance Metrics</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../evaluation/result_json/">Result JSON Reference</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">UFO² Desktop AgentOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ufo2/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../ufo2/as_galaxy_device/">Using as Galaxy Device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >HostAgent</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/host_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/host_agent/state/">State Machine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/host_agent/strategy/">Processing Strategy</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/host_agent/commands/">Command System</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >AppAgent</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/app_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/app_agent/state/">State Machine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/app_agent/strategy/">Processing Strategy</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/app_agent/commands/">Command System</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Core Features</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/core_features/hybrid_actions/">Hybrid GUI–API Actions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Control Detection</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/core_features/control_detection/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/core_features/control_detection/uia_detection/">UIA Detection</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/core_features/control_detection/visual_detection/">Visual Detection</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/core_features/control_detection/hybrid_detection/">Hybrid Detection</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Knowledge Substrate</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/core_features/knowledge_substrate/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/core_features/knowledge_substrate/learning_from_help_document/">Help Documents</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/core_features/knowledge_substrate/learning_from_bing_search/">Bing Search</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/core_features/knowledge_substrate/experience_learning/">Experience Learning</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/core_features/knowledge_substrate/learning_from_demonstration/">Demos</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/core_features/multi_action/">Speculative Multi-Action</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Advanced Usage</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/advanced_usage/follower_mode/">Follower Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/advanced_usage/batch_mode/">Batch Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/advanced_usage/operator_as_app_agent/">Operator Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/advanced_usage/customization/">Customization</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Prompts</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/prompts/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/prompts/basic_template/">Basic Template</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/prompts/examples_prompts/">Examples</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Evaluation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/evaluation/evaluation_agent/">EvaluationAgent</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/evaluation/benchmark/overview/">Benchmark Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/evaluation/benchmark/windows_agent_arena/">Windows Agent Arena</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/evaluation/benchmark/osworld/">OSWorld (Windows)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Performance Logs</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/evaluation/logs/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/evaluation/logs/evaluation_logs/">Evaluation Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/evaluation/logs/markdown_log_viewer/">Markdown Log Viewer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/evaluation/logs/request_logs/">Request Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/evaluation/logs/screenshots_logs/">Screenshots Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/evaluation/logs/step_logs/">Step Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../ufo2/evaluation/logs/ui_tree_logs/">UI Tree Logs</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Dataflow</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/dataflow/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/dataflow/instantiation/">Instantiation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/dataflow/execution/">Execution</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/dataflow/windows_app_env/">Windows App Environment</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../ufo2/dataflow/result/">Result</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Linux Agent</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../linux/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../linux/as_galaxy_device/">Using as Galaxy Device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../linux/state/">State Machine</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../linux/strategy/">Processing Strategy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../linux/commands/">MCP Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mobile Agent</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mobile/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mobile/as_galaxy_device/">Using as Galaxy Device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mobile/state/">State Machine</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mobile/strategy/">Processing Strategy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mobile/commands/">MCP Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials & Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tutorials/creating_mcp_servers/">Creating Custom MCP Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tutorials/creating_third_party_agents/">Creating Custom Third-Party Agents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Creating Custom Device Agents</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_device_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_device_agent/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_device_agent/client_setup/">Client Setup</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_device_agent/core_components/">Core Components</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_device_agent/mcp_server/">MCP Server</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_device_agent/configuration/">Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_device_agent/testing/">Testing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_device_agent/example_mobile_agent/">Example Mobile Agent</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Enhancing AppAgent Capabilities</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_app_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_app_agent/help_document_provision/">Help Document Provision</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_app_agent/demonstration_provision/">Demonstration Provision</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../tutorials/creating_app_agent/warpping_app_native_api/">Wrapping App-Native APIs</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Infrastructure</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Basic Modules</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/modules/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/modules/session/">Session</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/modules/round/">Round</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/modules/context/">Context</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/modules/dispatcher/">Dispatcher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/modules/session_pool/">Session Factory & Pool</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/modules/platform_sessions/">Platform Sessions</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Device Agent Architecture</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/agents/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/agents/agent_types/">Agent Types & Implementation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../infrastructure/agents/server_client_architecture/">Server-Client Architecture</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Architecture Layers</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../infrastructure/agents/design/state/">State Layer (Level-1)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../infrastructure/agents/design/processor/">Strategy Layer (Level-2)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../infrastructure/agents/design/strategy/">Strategy Components</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../infrastructure/agents/design/command/">Command Layer (Level-3)</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Supporting Systems</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../infrastructure/agents/design/memory/">Memory System</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../infrastructure/agents/design/blackboard/">Blackboard</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../infrastructure/agents/design/prompter/">Prompter</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agent Interaction Protocol (AIP)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../aip/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../aip/messages/">Message Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../aip/protocols/">Protocol Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../aip/transport/">Transport Layer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../aip/endpoints/">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../aip/resilience/">Resilience</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agent Server</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../server/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../server/quick_start/">Quick Start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../server/session_manager/">Session Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../server/websocket_handler/">WebSocket Handler</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../server/client_connection_manager/">Client Connection Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../server/api/">HTTP API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../server/monitoring/">Monitoring</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agent Client</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../client/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../client/quick_start/">Quick Start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../client/websocket_client/">WebSocket Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../client/ufo_client/">UFO Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../client/computer_manager/">Computer Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../client/computer/">Computer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../client/device_info/">Device Info Provider</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../client/mcp_integration/">MCP Integration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">MCP (Model Context Protocol)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mcp/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mcp/data_collection/">Data Collection Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mcp/action/">Action Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mcp/configuration/">Configuration Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mcp/local_servers/">Local Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../mcp/remote_servers/">Remote Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Server Reference</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/ui_collector/">UICollector</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/host_ui_executor/">HostUIExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/app_ui_executor/">AppUIExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/command_line_executor/">CommandLineExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/word_com_executor/">WordCOMExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/excel_com_executor/">ExcelCOMExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/ppt_com_executor/">PowerPointCOMExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/pdf_reader_executor/">PDFReaderExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/constellation_editor/">ConstellationEditor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/hardware_executor/">HardwareExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/bash_executor/">BashExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../mcp/servers/mobile_executor/">MobileExecutor</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../about/CONTRIBUTING/">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../about/LICENSE/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../about/CODE_OF_CONDUCT/">Code of Conduct</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../about/DISCLAIMER/">Disclaimer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../about/SUPPORT/">Support</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../faq/">FAQ</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">UFO³ Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">UFO³ Agent Galaxy</li>
          <li class="breadcrumb-item">Galaxy Client</li>
      <li class="breadcrumb-item active">Overview</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="galaxy-client-overview">Galaxy Client Overview</h1>
<p>Galaxy Client is the client-side layer responsible for multi-device coordination in the UFO³ framework. At its core is <strong>ConstellationClient</strong>, which manages device registration, connection, and task assignment. <strong>GalaxyClient</strong> provides a lightweight wrapper offering convenient session management interfaces.</p>
<h2 id="related-documentation">Related Documentation</h2>
<ul>
<li><a href="../constellation_client/">ConstellationClient</a> - Core device coordination component</li>
<li><a href="../device_manager/">DeviceManager</a> - Low-level connection management</li>
<li><a href="../components/">Components</a> - Modular component architecture</li>
<li><a href="../aip_integration/">AIP Integration</a> - Communication protocol integration</li>
<li><a href="../galaxy_client/">GalaxyClient</a> - Session wrapper API</li>
<li><a href="../../../configuration/system/galaxy_constellation/">Configuration</a> - Device configuration guide</li>
</ul>
<h2 id="the-complete-path-from-user-request-to-device-execution">The Complete Path: From User Request to Device Execution</h2>
<p>To understand Galaxy Client, we first need to see the entire system workflow. When a user submits a task request, the system processes it through several layers:</p>
<h3 id="1-user-interaction-layer-optional">1. User Interaction Layer (Optional)</h3>
<p>Users can interact with the Galaxy system in two ways:</p>
<p><strong>Interactive Mode</strong>: Users input natural language requests through a command-line interface (CLI), which are received and processed by GalaxyClient. This mode is primarily used for rapid prototyping and manual testing.</p>
<p><strong>Programmatic Mode</strong>: Developers directly call the Python API of ConstellationClient or GalaxyClient, integrating Galaxy into their applications. This is the recommended approach for production environments.</p>
<h3 id="2-session-management-layer-galaxyclient">2. Session Management Layer (GalaxyClient)</h3>
<p>GalaxyClient's role is to manage the lifecycle of task sessions. It doesn't handle specific device operations but instead:</p>
<ul>
<li>Initializes and holds a ConstellationClient instance</li>
<li>Creates a GalaxySession for each user request</li>
<li>Passes requests to ConstellationAgent for DAG planning (task decomposition)</li>
<li>Coordinates TaskConstellationOrchestrator to execute the DAG</li>
<li>Collects and aggregates execution results</li>
</ul>
<p><strong>GalaxyClient is optional</strong>. If your application doesn't need session management, you can use ConstellationClient directly.</p>
<h3 id="3-device-coordination-layer-constellationclient">3. Device Coordination Layer (ConstellationClient)</h3>
<p>ConstellationClient is the heart of Galaxy Client. It is responsible for:</p>
<p><strong>Device Management</strong>: Registering devices (each device has a unique ID, server URL, capability list, etc.), connecting to devices (via WebSocket), disconnecting devices, and monitoring device health status.</p>
<p><strong>Task Assignment</strong>: Receiving task requests from upper layers (TaskConstellationOrchestrator), selecting appropriate devices based on capabilities, sending tasks to devices via the AIP protocol, and waiting for and collecting task execution results.</p>
<p>ConstellationClient doesn't concern itself with how tasks are decomposed (that's ConstellationAgent's responsibility) or how DAGs are executed (that's TaskConstellationOrchestrator's responsibility). It focuses on "device-level matters."</p>
<h3 id="4-connection-management-layer-devicemanager">4. Connection Management Layer (DeviceManager)</h3>
<p>DeviceManager is the core internal component of ConstellationClient, responsible for all low-level connection management:</p>
<p><strong>WebSocket Connection Establishment</strong>: Establishes WebSocket connections with Agent Server, sends AIP REGISTER messages to register device identity, and requests device system information (DEVICE_INFO_REQUEST).</p>
<p><strong>Connection Monitoring</strong>: Sends HEARTBEAT messages every 20-30 seconds to check if devices are online. If a timeout occurs with no response, it triggers disconnection handling and automatically attempts reconnection (up to max_retries times).</p>
<p><strong>Message Routing</strong>: Starts a background message processing loop, receives messages returned by devices (TASK_END, COMMAND_RESULTS, etc.), and dispatches messages to appropriate handlers.</p>
<p><strong>Task Queuing</strong>: If a device is busy executing another task, new tasks are queued and automatically dequeued when the device becomes idle.</p>
<h3 id="5-protocol-layer-aip">5. Protocol Layer (AIP)</h3>
<p>All communication with devices goes through the <a href="../../../aip/overview/">Agent Interaction Protocol (AIP)</a>. AIP is a WebSocket-based messaging protocol that defines standard message types and interaction flows. Main message types used by Galaxy Client include:</p>
<ul>
<li><code>REGISTER</code>: Register device identity with Agent Server</li>
<li><code>DEVICE_INFO_REQUEST/RESPONSE</code>: Request and return device system information</li>
<li><code>TASK</code>: Assign task to device</li>
<li><code>TASK_END</code>: Device reports task completion</li>
<li><code>HEARTBEAT/HEARTBEAT_ACK</code>: Heartbeat health check</li>
<li><code>COMMAND_RESULTS</code>: Device reports intermediate execution results</li>
<li><code>ERROR</code>: Error reporting</li>
</ul>
<p>For detailed AIP explanation, see <a href="../aip_integration/">AIP Integration</a>.</p>
<h2 id="component-responsibilities">Component Responsibilities</h2>
<p>Having understood the overall flow, let's examine the specific responsibilities of each component:</p>
<h3 id="constellationclient-the-device-coordination-facade">ConstellationClient: The Device Coordination Facade</h3>
<p>ConstellationClient implements the Facade pattern. It provides simple device management APIs externally while delegating actual work to DeviceManager internally.</p>
<p><strong>What it does:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Register device</span>
<span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">register_device</span><span class="p">(</span>
    <span class="n">device_id</span><span class="o">=</span><span class="s2">&quot;windows_pc&quot;</span><span class="p">,</span>
    <span class="n">server_url</span><span class="o">=</span><span class="s2">&quot;ws://192.168.1.100:5000/ws&quot;</span><span class="p">,</span>
    <span class="n">os</span><span class="o">=</span><span class="s2">&quot;windows&quot;</span><span class="p">,</span>
    <span class="n">capabilities</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;office&quot;</span><span class="p">,</span> <span class="s2">&quot;web&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Connect device</span>
<span class="n">success</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect_device</span><span class="p">(</span><span class="s2">&quot;windows_pc&quot;</span><span class="p">)</span>

<span class="c1"># Assign task</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">assign_task_to_device</span><span class="p">(</span>
    <span class="n">device_id</span><span class="o">=</span><span class="s2">&quot;windows_pc&quot;</span><span class="p">,</span>
    <span class="n">task_request</span><span class="o">=</span><span class="n">TaskRequest</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Query status</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_device_status</span><span class="p">(</span><span class="s2">&quot;windows_pc&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>What it doesn't do:</strong></p>
<ul>
<li>DAG planning (handled by ConstellationAgent)</li>
<li>DAG execution (handled by TaskConstellationOrchestrator)</li>
<li>Session management (handled by GalaxySession)</li>
</ul>
<p>See <a href="../constellation_client/">ConstellationClient documentation</a> for detailed API reference.</p>
<h3 id="devicemanager-the-connection-management-engine">DeviceManager: The Connection Management Engine</h3>
<p>DeviceManager is the "engine" of ConstellationClient. It uses 5 modular components to accomplish connection management:</p>
<p><strong>DeviceRegistry</strong>: Stores AgentProfiles for all registered devices (including device ID, URL, status, capabilities, metadata, etc.). This component maintains the single source of truth for device state. When a device connects, disconnects, or changes status, DeviceRegistry is updated. Other components query DeviceRegistry to make decisions.</p>
<p><strong>WebSocketConnectionManager</strong>: Manages WebSocket connection lifecycle (connect, disconnect, send messages). This component handles the low-level WebSocket operations, including establishing connections, handling connection errors, and sending AIP messages. It maintains a mapping from device_id to WebSocket objects.</p>
<p><strong>HeartbeatManager</strong>: Background heartbeat loop that periodically sends HEARTBEAT to check device health. This runs as an independent asyncio task for each connected device. If a device fails to respond within the timeout period (2 × heartbeat_interval), HeartbeatManager triggers the disconnection handler, allowing the system to detect and respond to connection failures quickly.</p>
<p><strong>MessageProcessor</strong>: Background message processing loop that receives and routes AIP messages. This component runs a continuous loop for each device, receiving messages from the WebSocket and dispatching them to appropriate handlers. For example, TASK_END messages are used to complete task futures, COMMAND_RESULTS are logged for progress tracking, and ERROR messages trigger error handling.</p>
<p><strong>TaskQueueManager</strong>: Manages task queue for each device, queuing tasks when device is busy. When a task is assigned to a busy device, it's placed in that device's queue. When the device completes its current task and becomes IDLE, TaskQueueManager automatically dequeues the next task and executes it. This ensures tasks are never lost even when devices are overloaded.</p>
<p>This modular design ensures each component has a single responsibility, making testing and maintenance easier. See <a href="../device_manager/">DeviceManager documentation</a> for details.</p>
<h3 id="galaxyclient-session-management-wrapper">GalaxyClient: Session Management Wrapper</h3>
<p>GalaxyClient provides a higher-level abstraction on top of ConstellationClient:</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">GalaxyClient</span><span class="p">()</span>
<span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>  <span class="c1"># Initialize ConstellationClient and connect devices</span>

<span class="c1"># Process user request (internally creates GalaxySession, calls ConstellationAgent for DAG planning)</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">process_request</span><span class="p">(</span><span class="s2">&quot;Open Excel and create a sales chart&quot;</span><span class="p">)</span>

<span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>  <span class="c1"># Cleanup resources</span>
</code></pre></div>
<p>GalaxyClient's main value lies in:</p>
<ul>
<li>Simplifying initialization flow (automatically loads device info from config)</li>
<li>Providing session management (creates independent GalaxySession for each request)</li>
<li>Integrating display components (Rich console output, progress bars, etc.)</li>
<li>Supporting interactive mode (command-line interface)</li>
</ul>
<p>If your application already has its own session management logic, you can skip GalaxyClient and use ConstellationClient directly. See <a href="../galaxy_client/">GalaxyClient documentation</a> for detailed API.</p>
<h2 id="typical-workflow-example">Typical Workflow Example</h2>
<p>Let's walk through a complete example, from user request to device execution:</p>
<h3 id="scenario-processing-a-multi-device-task">Scenario: Processing a Multi-Device Task</h3>
<p>Suppose a user submits: "Download sales.xlsx from email, analyze it in Excel on Windows, then generate a report PDF on Linux".</p>
<p><strong>Step 1: Initialize GalaxyClient</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">GalaxyClient</span><span class="p">()</span>
<span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
</code></pre></div>
<p>What happens inside <code>initialize()</code>:</p>
<ol>
<li>GalaxyClient loads device information from config file (<code>device_info.yaml</code>)</li>
<li>Creates ConstellationClient instance and passes configuration</li>
<li>ConstellationClient calls <code>device_manager.register_device()</code> to register each device</li>
<li>If <code>auto_connect: true</code> is configured, automatically calls <code>device_manager.connect_device()</code></li>
<li>DeviceManager executes connection flow for each device (detailed below)</li>
</ol>
<p><strong>Step 2: Device Connection Flow (Inside DeviceManager)</strong></p>
<p>For each device (e.g., "windows_pc" and "linux_server"), DeviceManager executes:</p>
<div class="mermaid">sequenceDiagram
    participant DM as DeviceManager
    participant WS as WebSocketConnectionManager
    participant Server as Agent Server
    participant Device as Device Agent

    Note over DM,Device: 1. Establish WebSocket Connection
    DM-&gt;&gt;WS: connect_to_device(device_info)
    WS-&gt;&gt;Server: WebSocket handshake
    Server--&gt;&gt;WS: Connection established

    Note over DM,Device: 2. Register Device Identity (AIP REGISTER)
    WS-&gt;&gt;Server: REGISTER message
    Server-&gt;&gt;Device: Forward registration
    Device--&gt;&gt;Server: Service manifest (available MCP servers)
    Server--&gt;&gt;WS: REGISTER_CONFIRMATION

    Note over DM,Device: 3. Request Device System Info
    WS-&gt;&gt;Server: DEVICE_INFO_REQUEST
    Server-&gt;&gt;Device: Request system info
    Device--&gt;&gt;Server: System info (CPU, memory, OS, etc.)
    Server--&gt;&gt;WS: DEVICE_INFO_RESPONSE
    WS-&gt;&gt;DM: Update AgentProfile

    Note over DM,Device: 4. Start Background Services
    DM-&gt;&gt;DM: Start MessageProcessor (message handling loop)
    DM-&gt;&gt;DM: Start HeartbeatManager (heartbeat loop)
    DM-&gt;&gt;DM: Set device status to IDLE</div>
<p>This sequence diagram shows the connection establishment process. First, a WebSocket connection is established with the Agent Server. Then, the device registers its identity through the AIP REGISTER message, allowing the server to know which device is connecting and what capabilities it offers. Next, the client requests detailed system information from the device to populate the AgentProfile with actual hardware and software details. Finally, background services are started to maintain the connection and handle incoming messages.</p>
<p><strong>Step 3: User Request Processing</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">process_request</span><span class="p">(</span><span class="s2">&quot;Download sales.xlsx...&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Inside <code>process_request()</code>:</p>
<ol>
<li>GalaxyClient creates a GalaxySession</li>
<li>GalaxySession calls ConstellationAgent for task planning</li>
<li>ConstellationAgent (LLM-powered) decomposes task into DAG:</li>
<li>Task 1: Download sales.xlsx from email (requires "email" capability)</li>
<li>Task 2: Analyze in Excel (requires "office" capability, depends on Task 1)</li>
<li>Task 3: Generate PDF on Linux (requires "pdf_generation" capability, depends on Task 2)</li>
<li>TaskConstellationOrchestrator executes DAG:</li>
<li>Based on capability matching, Task 1 assigned to device with "email" capability</li>
<li>Task 2 assigned to "windows_pc" (has "office" capability)</li>
<li>Task 3 assigned to "linux_server" (has "pdf_generation" capability)</li>
</ol>
<p>The DAG structure ensures tasks execute in the correct order respecting dependencies, while allowing independent tasks to run in parallel across different devices.</p>
<p><strong>Step 4: Task Assignment and Execution (ConstellationClient/DeviceManager)</strong></p>
<p>For each task, ConstellationClient calls:</p>
<div class="highlight"><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">assign_task_to_device</span><span class="p">(</span>
    <span class="n">device_id</span><span class="o">=</span><span class="s2">&quot;windows_pc&quot;</span><span class="p">,</span>
    <span class="n">task_request</span><span class="o">=</span><span class="n">TaskRequest</span><span class="p">(</span>
        <span class="n">task_id</span><span class="o">=</span><span class="s2">&quot;task_2&quot;</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="s2">&quot;Analyze sales.xlsx in Excel&quot;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<p>Inside <code>assign_task_to_device()</code>:</p>
<ol>
<li>DeviceManager checks device status (via DeviceRegistry)</li>
<li>If device is IDLE, execute task immediately</li>
<li>If device is BUSY, task enters queue (TaskQueueManager)</li>
<li>WebSocketConnectionManager sends TASK message to device via AIP</li>
<li>MessageProcessor waits in background for device to return COMMAND_RESULTS and TASK_END</li>
<li>When task completes, DeviceManager changes device status back to IDLE</li>
<li>If there are queued tasks, automatically dequeue and execute next task</li>
</ol>
<p>The queuing mechanism ensures no tasks are lost when devices are busy, and tasks are executed in order as devices become available.</p>
<p><strong>Step 5: Connection Monitoring (Continuous Background Process)</strong></p>
<p>Throughout task execution, HeartbeatManager continuously monitors each device:</p>
<ul>
<li>Sends HEARTBEAT message every 20-30 seconds</li>
<li>If device responds, updates <code>last_heartbeat</code> timestamp</li>
<li>If timeout with no response (2 × heartbeat_interval), triggers disconnection handling:</li>
<li>Stops MessageProcessor and HeartbeatManager</li>
<li>Sets device status to DISCONNECTED</li>
<li>If device was executing a task, marks task as failed</li>
<li>Attempts automatic reconnection (up to max_retries times)</li>
</ul>
<p>This continuous monitoring ensures the system quickly detects and responds to connection failures, maintaining reliable communication with devices.</p>
<p><strong>Step 6: Result Collection and Return</strong></p>
<p>After all tasks complete:</p>
<ol>
<li>TaskConstellationOrchestrator aggregates all task results</li>
<li>GalaxySession generates session results (including execution time, rounds, DAG statistics)</li>
<li>GalaxyClient returns results to user</li>
<li>Results are automatically saved to log directory</li>
</ol>
<p>The complete execution trace is preserved in logs for debugging and analysis.</p>
<h2 id="relationships-with-other-system-components">Relationships with Other System Components</h2>
<p>Galaxy Client is not an isolated system—it closely collaborates with other UFO³ components:</p>
<h3 id="depends-on-agent-server-for-message-routing">Depends on Agent Server for Message Routing</h3>
<p>Galaxy Client doesn't connect directly to devices but routes through <a href="../../../server/overview/">Agent Server</a>. Agent Server's role is to:</p>
<p><strong>Maintain Device Registry</strong>: Tracks which devices are online and their connection details. When a device connects, Agent Server registers it in the central registry.</p>
<p><strong>Route Messages</strong>: Forwards TASK messages from Galaxy Client to the correct device based on device_id. The server acts as a message broker, decoupling clients from devices.</p>
<p><strong>Broadcast Device Status</strong>: Notifies clients when devices come online or go offline, enabling clients to maintain accurate device availability information.</p>
<p><strong>Load Balancing</strong>: If multiple clients connect to the same device, Agent Server can distribute load and prevent conflicts.</p>
<h3 id="used-by-constellationagent-for-task-planning">Used by ConstellationAgent for Task Planning</h3>
<p>When GalaxyClient receives a user request, it calls <a href="../../constellation_agent/overview/">ConstellationAgent</a> to decompose the request into a DAG (Directed Acyclic Graph). ConstellationAgent is LLM-powered and can:</p>
<p><strong>Understand Natural Language</strong>: Parses user requests to identify subtasks and their relationships. For example, "Download file and then analyze it" is recognized as two sequential tasks.</p>
<p><strong>Identify Task Dependencies</strong>: Determines which tasks must complete before others can start, constructing a proper dependency graph.</p>
<p><strong>Suggest Device Assignments</strong>: Based on device capabilities, recommends which device should execute each task. If a task requires "office" capability, it's assigned to devices that advertise this capability.</p>
<p><strong>Dynamically Adjust DAG</strong>: If issues arise during execution (e.g., a device fails), ConstellationAgent can replan and modify the DAG to adapt to the new situation.</p>
<p>For more details, see <a href="../../constellation_agent/overview/">ConstellationAgent Documentation</a>.</p>
<h3 id="coordinates-with-taskconstellationorchestrator-for-dag-execution">Coordinates with TaskConstellationOrchestrator for DAG Execution</h3>
<p>Once ConstellationAgent creates the DAG, <a href="../../constellation_orchestrator/overview/">TaskConstellationOrchestrator</a> executes it across devices. The orchestrator:</p>
<ul>
<li><strong>Respects Dependencies</strong>: Ensures tasks execute in the correct order based on the DAG structure</li>
<li><strong>Selects Devices</strong>: Chooses appropriate devices based on capability matching</li>
<li><strong>Parallel Execution</strong>: Runs independent tasks concurrently across different devices</li>
<li><strong>Handles Failures</strong>: Manages task failures and triggers replanning if needed</li>
</ul>
<p>For more details, see <a href="../../constellation_orchestrator/overview/">TaskConstellationOrchestrator Documentation</a>.</p>
<h3 id="collaborates-with-device-agents-for-task-execution">Collaborates with Device Agents for Task Execution</h3>
<p>The actual task execution happens on <a href="../../../client/overview/">Device Agents</a> running on each device (such as UFO² Desktop Agent, Linux Agent, etc.). Device Agents are responsible for:</p>
<p><strong>Receiving Tasks</strong>: Accepts tasks from Agent Server and parses task requirements. Each task specifies what action to perform and what parameters to use.</p>
<p><strong>Invoking MCP Servers</strong>: Calls local MCP servers to perform specific operations (such as opening Excel, running commands, etc.). MCP servers provide the actual execution capabilities.</p>
<p><strong>Reporting Progress</strong>: Sends intermediate execution results through COMMAND_RESULTS messages, allowing clients to track progress in real-time.</p>
<p><strong>Handling Errors</strong>: Deals with local errors and exceptions, reporting them back to the client through ERROR messages for proper error handling.</p>
<h3 id="unified-communication-through-aip-protocol">Unified Communication through AIP Protocol</h3>
<p>All cross-component communication follows the <a href="../../../aip/overview/">AIP protocol</a>. AIP provides:</p>
<p><strong>Standardized Message Formats</strong>: Uses Pydantic models to define message structure, ensuring type safety and validation at both ends of communication.</p>
<p><strong>Type-Safe Message Validation</strong>: Automatically validates message fields using Pydantic, catching errors early before they propagate through the system.</p>
<p><strong>Request-Response Correlation</strong>: Uses request_id/response_id fields to match requests with their responses, enabling proper async handling.</p>
<p><strong>Error Handling Mechanism</strong>: Defines standard ERROR message types for reporting and handling failures consistently across all components.</p>
<h2 id="configuration-and-deployment">Configuration and Deployment</h2>
<h3 id="device-configuration">Device Configuration</h3>
<p>Device information is defined through configuration files. See <a href="../../../configuration/system/galaxy_constellation/">Galaxy Configuration</a> for complete configuration options.</p>
<p>A typical configuration example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># config/galaxy/constellation.yaml</span>
<span class="nt">task_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;production_constellation&quot;</span>
<span class="nt">heartbeat_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span><span class="w">  </span><span class="c1"># Heartbeat interval (seconds)</span>
<span class="nt">reconnect_delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span><span class="w">      </span><span class="c1"># Reconnection delay (seconds)</span>
<span class="nt">max_concurrent_tasks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w">   </span><span class="c1"># Max concurrent tasks per device</span>

<span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">device_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;windows_pc&quot;</span>
<span class="w">    </span><span class="nt">server_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ws://192.168.1.100:5000/ws&quot;</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;windows&quot;</span>
<span class="w">    </span><span class="nt">capabilities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;office&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;email&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;web&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">auto_connect</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">max_retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w">  </span><span class="c1"># Maximum reconnection attempts</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">device_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;linux_server&quot;</span>
<span class="w">    </span><span class="nt">server_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ws://192.168.1.101:5000/ws&quot;</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;linux&quot;</span>
<span class="w">    </span><span class="nt">capabilities</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;database&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;api&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;pdf_generation&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">auto_connect</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">max_retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div>
<p>Configuration fields explained:</p>
<ul>
<li><strong>task_name</strong>: Unique identifier for this constellation, used in logs and debugging</li>
<li><strong>heartbeat_interval</strong>: How often to check device health (recommended: 20-30 seconds)</li>
<li><strong>reconnect_delay</strong>: Wait time between reconnection attempts (recommended: 3-5 seconds)</li>
<li><strong>max_concurrent_tasks</strong>: Maximum tasks a device can execute simultaneously</li>
<li><strong>capabilities</strong>: List of capabilities each device provides, used for task assignment</li>
<li><strong>auto_connect</strong>: Whether to automatically connect when client initializes</li>
<li><strong>max_retries</strong>: Maximum reconnection attempts before giving up</li>
</ul>
<h3 id="development-vs-production-environment">Development vs Production Environment</h3>
<p><strong>Development Recommendations:</strong></p>
<ul>
<li>Use interactive mode for quick testing: <code>python -m galaxy --interactive</code></li>
<li>Enable DEBUG log level for detailed information</li>
<li>Single-device configuration to simplify debugging</li>
<li>Use local Agent Server (<code>ws://127.0.0.1:5000/ws</code>)</li>
<li>Lower heartbeat_interval (e.g., 10 seconds) for faster failure detection</li>
</ul>
<p><strong>Production Recommendations:</strong></p>
<ul>
<li>Use WSS (secure WebSocket) instead of WS for encrypted communication</li>
<li>Configure reasonable heartbeat_interval (20-30 seconds) to balance responsiveness and network overhead</li>
<li>Set appropriate max_retries (5-10 attempts) based on network reliability</li>
<li>Enable automatic reconnection (<code>auto_connect: true</code>) for resilience</li>
<li>Monitor device health status via <code>get_device_status()</code> API and set up alerts</li>
<li>Configure log rotation and archiving to prevent disk space issues</li>
<li>Use connection pooling if connecting to many devices</li>
<li>Implement circuit breaker pattern for failing devices</li>
</ul>
<h2 id="detailed-component-documentation">Detailed Component Documentation</h2>
<ul>
<li><a href="../constellation_client/">ConstellationClient API Reference</a> - Complete device coordination API</li>
<li><a href="../device_manager/">DeviceManager Internals</a> - Detailed connection management mechanisms</li>
<li><a href="../components/">Components Module</a> - Detailed explanation of 5 core components</li>
<li><a href="../aip_integration/">AIP Integration</a> - How to use the communication protocol</li>
<li><a href="../galaxy_client/">GalaxyClient Session Wrapper</a> - Session management API</li>
</ul>
<h2 id="summary">Summary</h2>
<p>Galaxy Client provides the core multi-device coordination capabilities in UFO³. Through layered design, it simplifies complex distributed system management into clear APIs:</p>
<ul>
<li><strong>ConstellationClient</strong> is the core of device management, handling device registration, connection, and task assignment</li>
<li><strong>DeviceManager</strong> is the underlying engine, processing WebSocket, heartbeat, message routing, and task queuing</li>
<li><strong>GalaxyClient</strong> is an optional session wrapper, providing more convenient high-level APIs</li>
</ul>
<p>If you're new to Galaxy Client, we recommend reading the documentation in this order:</p>
<ol>
<li>This Overview (understand overall architecture and workflow)</li>
<li><a href="../constellation_client/">ConstellationClient</a> (learn core API)</li>
<li><a href="../components/">Components</a> (understand modular components)</li>
<li><a href="../device_manager/">DeviceManager</a> (dive deep into connection management)</li>
<li><a href="../aip_integration/">AIP Integration</a> (master communication protocol)</li>
</ol>
<p>If you need to get started quickly, jump directly to <a href="../galaxy_client/">GalaxyClient</a> example code.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../webui/" class="btn btn-neutral float-left" title="WebUI"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../constellation_client/" class="btn btn-neutral float-right" title="ConstellationClient">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../webui/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../constellation_client/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
      <script src="../../../javascripts/mermaid-init.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
