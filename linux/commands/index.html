<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>MCP Commands - UFO³ Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "MCP Commands";
        var mkdocs_page_input_path = "linux/commands.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> UFO³ Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../choose_path/">Choose Your Path</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../project_directory_structure/">Project Directory Structure</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/quick_start_galaxy/">Quick Start (UFO³ Agent Galaxy)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/quick_start_ufo2/">Quick Start (UFO²)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/quick_start_linux/">Quick Start (Linux Agent)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/quick_start_mobile/">Quick Start (Mobile Agent)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/migration_ufo2_to_galaxy/">Migration UFO² → UFO³</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/more_guidance/">More Guidance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Configuration & Setup</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Configuration System</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/agents_config/">Agent Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/system_config/">System Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/rag_config/">RAG Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/prices_config/">Pricing Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/third_party_config/">Third-Party Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/mcp_reference/">MCP Reference</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/migration/">Migration Guide</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/extending/">Extending Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Galaxy Configuration</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../configuration/system/galaxy_devices/">Devices</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../configuration/system/galaxy_constellation/">Constellation</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../configuration/system/galaxy_agent/">Agent</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Model Setup</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/openai/">OpenAI</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/azure_openai/">Azure OpenAI</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/operator/">OpenAI CUA (Operator)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/gemini/">Gemini</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/claude/">Claude</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/qwen/">Qwen</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/deepseek/">DeepSeek</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/ollama/">Ollama</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/custom_model/">Custom Model</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">UFO³ Agent Galaxy</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../galaxy/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../galaxy/webui/">WebUI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Galaxy Client</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/constellation_client/">ConstellationClient</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/device_manager/">DeviceManager</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/components/">Components</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/aip_integration/">AIP Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/galaxy_client/">GalaxyClient</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Agent Registration</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/agent_registration/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/agent_registration/agent_profile/">Agent Profile</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/agent_registration/device_registry/">Device Registry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/agent_registration/registration_flow/">Registration Flow</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Task Constellation (DAG)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/task_star/">TaskStar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/task_star_line/">TaskStarLine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/task_constellation/">TaskConstellation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/constellation_editor/">ConstellationEditor</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Constellation Agent</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_agent/state/">State Machine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_agent/strategy/">Strategy Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_agent/command/">MCP Commands</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Constellation Orchestrator</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/event_driven_coordination/">Event-Driven Coordination</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/asynchronous_scheduling/">Asynchronous Scheduling</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/safe_assignment_locking/">Safe Assignment Locking</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/consistency_guarantees/">Consistency Guarantees</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/batched_editing/">Batched Editing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/constellation_manager/">Constellation Manager</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/api_reference/">API Reference</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Observer System</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/event_system/">Event System</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/progress_observer/">Progress Observer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/agent_output_observer/">Agent Output Observer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/synchronizer/">Synchronizer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/metrics_observer/">Metrics Observer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/visualization_observer/">Visualization Observer</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Evaluation & Logging</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/evaluation/trajectory_report/">Trajectory Report</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/evaluation/performance_metrics/">Performance Metrics</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/evaluation/result_json/">Result JSON Reference</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">UFO² Desktop AgentOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../ufo2/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ufo2/as_galaxy_device/">Using as Galaxy Device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >HostAgent</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/host_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/host_agent/state/">State Machine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/host_agent/strategy/">Processing Strategy</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/host_agent/commands/">Command System</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >AppAgent</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/app_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/app_agent/state/">State Machine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/app_agent/strategy/">Processing Strategy</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/app_agent/commands/">Command System</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Core Features</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/core_features/hybrid_actions/">Hybrid GUI–API Actions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Control Detection</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/control_detection/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/control_detection/uia_detection/">UIA Detection</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/control_detection/visual_detection/">Visual Detection</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/control_detection/hybrid_detection/">Hybrid Detection</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Knowledge Substrate</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/learning_from_help_document/">Help Documents</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/learning_from_bing_search/">Bing Search</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/experience_learning/">Experience Learning</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/learning_from_demonstration/">Demos</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/core_features/multi_action/">Speculative Multi-Action</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Advanced Usage</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/advanced_usage/follower_mode/">Follower Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/advanced_usage/batch_mode/">Batch Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/advanced_usage/operator_as_app_agent/">Operator Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/advanced_usage/customization/">Customization</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Prompts</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/prompts/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/prompts/basic_template/">Basic Template</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/prompts/examples_prompts/">Examples</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Evaluation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/evaluation/evaluation_agent/">EvaluationAgent</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/evaluation/benchmark/overview/">Benchmark Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/evaluation/benchmark/windows_agent_arena/">Windows Agent Arena</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/evaluation/benchmark/osworld/">OSWorld (Windows)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Performance Logs</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/evaluation_logs/">Evaluation Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/markdown_log_viewer/">Markdown Log Viewer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/request_logs/">Request Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/screenshots_logs/">Screenshots Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/step_logs/">Step Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/ui_tree_logs/">UI Tree Logs</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Dataflow</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/instantiation/">Instantiation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/execution/">Execution</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/windows_app_env/">Windows App Environment</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/result/">Result</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Linux Agent</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../as_galaxy_device/">Using as Galaxy Device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../state/">State Machine</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../strategy/">Processing Strategy</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">MCP Commands</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#command-architecture">Command Architecture</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#mcp-server-integration">MCP Server Integration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#command-dispatcher">Command Dispatcher</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#primary-mcp-tools">Primary MCP Tools</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-execute_command-execute-shell-commands">1. execute_command - Execute Shell Commands</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#tool-specification">Tool Specification</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#execution-flow">Execution Flow</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#result-structure">Result Structure</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#common-use-cases">Common Use Cases</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#error-handling">Error Handling</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#security-considerations">Security Considerations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-get_system_info-collect-system-information">2. get_system_info - Collect System Information</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#tool-specification_1">Tool Specification</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#information-collected">Information Collected</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#execution-flow_1">Execution Flow</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#result-example">Result Example</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#command-execution-pipeline">Command Execution Pipeline</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#atomic-building-blocks">Atomic Building Blocks</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#isolation-of-system-operations">Isolation of System Operations</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#command-composition">Command Composition</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#sequential-execution">Sequential Execution</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#conditional-execution">Conditional Execution</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#error-recovery">Error Recovery</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#command-implementation">Command Implementation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#mcp-server-location">MCP Server Location</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example-implementation-skeleton">Example Implementation Skeleton</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#best-practices">Best Practices</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#tool-usage">Tool Usage</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#security">Security</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#error-handling_1">Error Handling</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#comparison-with-other-agent-commands">Comparison with Other Agent Commands</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#next-steps">Next Steps</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mobile Agent</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/as_galaxy_device/">Using as Galaxy Device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/state/">State Machine</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/strategy/">Processing Strategy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/commands/">MCP Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials & Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/creating_mcp_servers/">Creating Custom MCP Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/creating_third_party_agents/">Creating Custom Third-Party Agents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Creating Custom Device Agents</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/client_setup/">Client Setup</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/core_components/">Core Components</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/mcp_server/">MCP Server</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/configuration/">Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/testing/">Testing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/example_mobile_agent/">Example Mobile Agent</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Enhancing AppAgent Capabilities</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_app_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_app_agent/help_document_provision/">Help Document Provision</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_app_agent/demonstration_provision/">Demonstration Provision</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_app_agent/warpping_app_native_api/">Wrapping App-Native APIs</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Infrastructure</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Basic Modules</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/session/">Session</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/round/">Round</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/context/">Context</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/dispatcher/">Dispatcher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/session_pool/">Session Factory & Pool</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/platform_sessions/">Platform Sessions</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Device Agent Architecture</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/agents/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/agents/agent_types/">Agent Types & Implementation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/agents/server_client_architecture/">Server-Client Architecture</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Architecture Layers</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/state/">State Layer (Level-1)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/processor/">Strategy Layer (Level-2)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/strategy/">Strategy Components</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/command/">Command Layer (Level-3)</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Supporting Systems</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/memory/">Memory System</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/blackboard/">Blackboard</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/prompter/">Prompter</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agent Interaction Protocol (AIP)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/messages/">Message Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/protocols/">Protocol Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/transport/">Transport Layer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/endpoints/">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/resilience/">Resilience</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agent Server</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/quick_start/">Quick Start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/session_manager/">Session Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/websocket_handler/">WebSocket Handler</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/client_connection_manager/">Client Connection Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/api/">HTTP API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/monitoring/">Monitoring</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agent Client</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../client/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../client/quick_start/">Quick Start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../client/websocket_client/">WebSocket Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../client/ufo_client/">UFO Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../client/computer_manager/">Computer Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../client/computer/">Computer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../client/device_info/">Device Info Provider</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../client/mcp_integration/">MCP Integration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">MCP (Model Context Protocol)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/data_collection/">Data Collection Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/action/">Action Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/configuration/">Configuration Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/local_servers/">Local Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/remote_servers/">Remote Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Server Reference</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/ui_collector/">UICollector</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/host_ui_executor/">HostUIExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/app_ui_executor/">AppUIExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/command_line_executor/">CommandLineExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/word_com_executor/">WordCOMExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/excel_com_executor/">ExcelCOMExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/ppt_com_executor/">PowerPointCOMExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/pdf_reader_executor/">PDFReaderExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/constellation_editor/">ConstellationEditor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/hardware_executor/">HardwareExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/bash_executor/">BashExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/mobile_executor/">MobileExecutor</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/CONTRIBUTING/">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/LICENSE/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/CODE_OF_CONDUCT/">Code of Conduct</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/DISCLAIMER/">Disclaimer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/SUPPORT/">Support</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">UFO³ Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Linux Agent</li>
      <li class="breadcrumb-item active">MCP Commands</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="linuxagent-mcp-commands">LinuxAgent MCP Commands</h1>
<p>LinuxAgent interacts with Linux systems through MCP (Model Context Protocol) tools provided by the Linux MCP Server. These tools provide atomic building blocks for CLI task execution, isolating system-specific operations within the MCP server layer.</p>
<h2 id="command-architecture">Command Architecture</h2>
<h3 id="mcp-server-integration">MCP Server Integration</h3>
<p>LinuxAgent commands are executed through the MCP server infrastructure:</p>
<div class="mermaid">graph LR
    A[LinuxAgent] --&gt; B[Command Dispatcher]
    B --&gt; C[MCP Server]
    C --&gt; D[Linux Shell]
    D --&gt; E[stdout/stderr]
    E --&gt; C
    C --&gt; B
    B --&gt; A</div>
<h3 id="command-dispatcher">Command Dispatcher</h3>
<p>The command dispatcher routes commands to the appropriate MCP server:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">aip.messages</span><span class="w"> </span><span class="kn">import</span> <span class="n">Command</span>

<span class="c1"># Create command</span>
<span class="n">command</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span>
    <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;execute_command&quot;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;df -h&quot;</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span>
    <span class="n">tool_type</span><span class="o">=</span><span class="s2">&quot;action&quot;</span>
<span class="p">)</span>

<span class="c1"># Execute command via dispatcher</span>
<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">command_dispatcher</span><span class="o">.</span><span class="n">execute_commands</span><span class="p">([</span><span class="n">command</span><span class="p">])</span>
<span class="n">execution_result</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">result</span>
</code></pre></div>
<h2 id="primary-mcp-tools">Primary MCP Tools</h2>
<h3 id="1-execute_command-execute-shell-commands">1. execute_command - Execute Shell Commands</h3>
<p><strong>Purpose</strong>: Execute arbitrary shell commands and capture structured results.</p>
<h4 id="tool-specification">Tool Specification</h4>
<div class="highlight"><pre><span></span><code><span class="n">tool_name</span> <span class="o">=</span> <span class="s2">&quot;execute_command&quot;</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;df -h&quot;</span><span class="p">,</span>              <span class="c1"># Shell command to execute</span>
    <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>                   <span class="c1"># Execution timeout (seconds, default: 30)</span>
    <span class="s2">&quot;cwd&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user&quot;</span>              <span class="c1"># Optional working directory</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="execution-flow">Execution Flow</h4>
<div class="mermaid">sequenceDiagram
    participant Agent
    participant Dispatcher
    participant MCP
    participant Shell

    Agent-&gt;&gt;Dispatcher: execute_command: df -h
    Dispatcher-&gt;&gt;MCP: Forward command
    MCP-&gt;&gt;Shell: Execute: df -h
    Shell-&gt;&gt;Shell: Run command
    Shell--&gt;&gt;MCP: stdout + stderr + exit_code
    MCP-&gt;&gt;MCP: Structure result
    MCP--&gt;&gt;Dispatcher: Execution result
    Dispatcher--&gt;&gt;Agent: Structured result</div>
<h4 id="result-structure">Result Structure</h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>                  <span class="c1"># Boolean indicating success</span>
  <span class="s2">&quot;exit_code&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>                   <span class="c1"># Process exit code</span>
  <span class="s2">&quot;stdout&quot;</span><span class="p">:</span> <span class="s2">&quot;Filesystem      Size  Used Avail Use% Mounted on</span><span class="se">\n</span><span class="s2">/dev/sda1       100G   50G   46G  52% /</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
  <span class="s2">&quot;stderr&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>                      <span class="c1"># Standard error output</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="common-use-cases">Common Use Cases</h4>
<table>
<thead>
<tr>
<th>Use Case</th>
<th>Command Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>File Operations</strong></td>
<td><code>ls -la /home/user</code></td>
<td>List directory contents</td>
</tr>
<tr>
<td><strong>Text Processing</strong></td>
<td><code>grep "error" /var/log/syslog</code></td>
<td>Search log files</td>
</tr>
<tr>
<td><strong>System Monitoring</strong></td>
<td><code>top -bn1</code></td>
<td>Check system processes</td>
</tr>
<tr>
<td><strong>Disk Management</strong></td>
<td><code>df -h</code></td>
<td>Check disk space</td>
</tr>
<tr>
<td><strong>Network Operations</strong></td>
<td><code>ping -c 4 example.com</code></td>
<td>Test network connectivity</td>
</tr>
<tr>
<td><strong>Archive Creation</strong></td>
<td><code>tar -czf backup.tar.gz /data</code></td>
<td>Create compressed archives</td>
</tr>
<tr>
<td><strong>Package Management</strong></td>
<td><code>apt list --installed</code></td>
<td>List installed packages</td>
</tr>
</tbody>
</table>
<h4 id="error-handling">Error Handling</h4>
<p><strong>Exit Code Interpretation</strong>:</p>
<ul>
<li><strong>0</strong>: Success</li>
<li><strong>1-125</strong>: Command-specific errors</li>
<li><strong>126</strong>: Command not executable</li>
<li><strong>127</strong>: Command not found</li>
<li><strong>128+n</strong>: Terminated by signal n</li>
</ul>
<p><strong>Example Error Result</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
  <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Command not found: invalid_cmd&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="security-considerations">Security Considerations</h4>
<div class="admonition warning">
<p class="admonition-title">Command Safety</p>
<p>The MCP server blocks dangerous commands including:</p>
<ul>
<li><code>rm -rf /</code> - Recursive root deletion</li>
<li>Fork bombs - <code>:(){ :|:&amp; };:</code></li>
<li><code>mkfs</code> - Filesystem formatting</li>
<li><code>dd if=/dev/zero</code> - Device overwriting</li>
<li><code>shutdown</code>, <code>reboot</code> - System shutdown</li>
</ul>
<p>Commands execute with user permissions, no automatic privilege escalation. Timeout protection prevents hung processes.</p>
</div>
<h3 id="2-get_system_info-collect-system-information">2. get_system_info - Collect System Information</h3>
<p><strong>Purpose</strong>: Gather basic Linux system information using standard commands.</p>
<h4 id="tool-specification_1">Tool Specification</h4>
<div class="highlight"><pre><span></span><code><span class="n">tool_name</span> <span class="o">=</span> <span class="s2">&quot;get_system_info&quot;</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># No parameters required</span>
</code></pre></div>
<h4 id="information-collected">Information Collected</h4>
<p>The tool executes these commands and returns their output:</p>
<table>
<thead>
<tr>
<th>Info Type</th>
<th>Command</th>
<th>Data Returned</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>uname</strong></td>
<td><code>uname -a</code></td>
<td>System and kernel information</td>
</tr>
<tr>
<td><strong>uptime</strong></td>
<td><code>uptime</code></td>
<td>System uptime and load averages</td>
</tr>
<tr>
<td><strong>memory</strong></td>
<td><code>free -h</code></td>
<td>Memory usage statistics (human-readable)</td>
</tr>
<tr>
<td><strong>disk</strong></td>
<td><code>df -h</code></td>
<td>Disk space for all mounted filesystems</td>
</tr>
</tbody>
</table>
<h4 id="execution-flow_1">Execution Flow</h4>
<div class="mermaid">sequenceDiagram
    participant Agent
    participant Dispatcher
    participant MCP
    participant System

    Agent-&gt;&gt;Dispatcher: get_system_info
    Dispatcher-&gt;&gt;MCP: Forward request
    MCP-&gt;&gt;System: Execute uname, uptime, free, df
    System--&gt;&gt;MCP: Command outputs
    MCP-&gt;&gt;MCP: Aggregate results
    MCP--&gt;&gt;Dispatcher: Structured info
    Dispatcher--&gt;&gt;Agent: System information</div>
<h4 id="result-example">Result Example</h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;uname&quot;</span><span class="p">:</span> <span class="s2">&quot;Linux hostname 5.15.0-91-generic #101-Ubuntu SMP x86_64 GNU/Linux&quot;</span><span class="p">,</span>
  <span class="s2">&quot;uptime&quot;</span><span class="p">:</span> <span class="s2">&quot; 14:23:45 up 5 days,  3:12,  2 users,  load average: 0.52, 0.58, 0.59&quot;</span><span class="p">,</span>
  <span class="s2">&quot;memory&quot;</span><span class="p">:</span> <span class="s2">&quot;              total        used        free      shared  buff/cache   available</span><span class="se">\n</span><span class="s2">Mem:           15Gi       8.2Gi       1.5Gi       256Mi       5.8Gi       7.0Gi</span><span class="se">\n</span><span class="s2">Swap:         8.0Gi       512Mi       7.5Gi&quot;</span><span class="p">,</span>
  <span class="s2">&quot;disk&quot;</span><span class="p">:</span> <span class="s2">&quot;Filesystem      Size  Used Avail Use% Mounted on</span><span class="se">\n</span><span class="s2">/dev/sda1       100G   50G   46G  52% /</span><span class="se">\n</span><span class="s2">/dev/sdb1       500G  200G  276G  42% /data&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="command-execution-pipeline">Command Execution Pipeline</h2>
<h3 id="atomic-building-blocks">Atomic Building Blocks</h3>
<p>The MCP tools <code>execute_command</code> and <code>get_system_info</code> serve as atomic operations:</p>
<div class="mermaid">graph TD
    A[User Request] --&gt; B[LLM Reasoning]
    B --&gt; C{Select Tool}
    C --&gt;|Execute CLI| D[execute_command]
    C --&gt;|Get System Info| E[get_system_info]

    D --&gt; F[Capture Result]
    E --&gt; F

    F --&gt; G[Update Memory]
    G --&gt; H{Task Complete?}
    H --&gt;|No| B
    H --&gt;|Yes| I[FINISH]</div>
<h3 id="isolation-of-system-operations">Isolation of System Operations</h3>
<p>By isolating system operations in the MCP server layer, the architecture achieves clear separation: the Agent layer focuses on LLM reasoning and workflow orchestration, while the MCP layer handles system-specific command execution. This provides testability (commands can be mocked) and portability (MCP servers can be deployed remotely).</p>
<h2 id="command-composition">Command Composition</h2>
<h3 id="sequential-execution">Sequential Execution</h3>
<p>LinuxAgent executes commands sequentially, building on previous results:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Round 1: Check disk space</span>
<span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;tool&quot;</span><span class="p">:</span> <span class="s2">&quot;execute_command&quot;</span><span class="p">,</span>
    <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;df -h /data&quot;</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1"># Result: 276GB available</span>

<span class="c1"># Round 2: Create backup (informed by Round 1 result)</span>
<span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;tool&quot;</span><span class="p">:</span> <span class="s2">&quot;execute_command&quot;</span><span class="p">,</span>
    <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;tar -czf /data/backup.tar.gz /home/user&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="conditional-execution">Conditional Execution</h3>
<p>LLM can make decisions based on command results:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Round 1: Check if file exists</span>
<span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;tool&quot;</span><span class="p">:</span> <span class="s2">&quot;execute_command&quot;</span><span class="p">,</span>
    <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;ls /data/backup.tar.gz&quot;</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1"># Result: exit_code=2 (file not found)</span>

<span class="c1"># Round 2: File doesn&#39;t exist, create it</span>
<span class="p">{</span>
  <span class="s2">&quot;thought&quot;</span><span class="p">:</span> <span class="s2">&quot;Backup doesn&#39;t exist, creating new one&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;tool&quot;</span><span class="p">:</span> <span class="s2">&quot;execute_command&quot;</span><span class="p">,</span>
    <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;tar -czf /data/backup.tar.gz /home/user&quot;</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="error-recovery">Error Recovery</h3>
<p>Commands can be retried or alternatives attempted:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Round 1: Try privileged command</span>
<span class="p">{</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;tool&quot;</span><span class="p">:</span> <span class="s2">&quot;execute_command&quot;</span><span class="p">,</span>
    <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;systemctl restart nginx&quot;</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="c1"># Result: success=False, error=&quot;Permission denied&quot;</span>

<span class="c1"># Round 2: Switch to user-level alternative</span>
<span class="p">{</span>
  <span class="s2">&quot;thought&quot;</span><span class="p">:</span> <span class="s2">&quot;Don&#39;t have sudo access, using alternative approach&quot;</span><span class="p">,</span>
  <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;tool&quot;</span><span class="p">:</span> <span class="s2">&quot;execute_command&quot;</span><span class="p">,</span>
    <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;kill -HUP $(cat /var/run/nginx.pid)&quot;</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="command-implementation">Command Implementation</h2>
<h3 id="mcp-server-location">MCP Server Location</h3>
<p>The MCP server implementation for Linux commands can be found in:</p>
<div class="highlight"><pre><span></span><code>ufo/client/mcp/http_servers/
└── linux_mcp_server.py
</code></pre></div>
<h3 id="example-implementation-skeleton">Example Implementation Skeleton</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LinuxMCPServer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;MCP server for Linux CLI commands&quot;&quot;&quot;</span>

    <span class="nd">@mcp</span><span class="o">.</span><span class="n">tool</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute_command</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> 
        <span class="n">command</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
        <span class="n">cwd</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute a shell command&quot;&quot;&quot;</span>
        <span class="c1"># Block dangerous commands</span>
        <span class="n">dangerous</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rm -rf /&quot;</span><span class="p">,</span> <span class="s2">&quot;:(){ :|:&amp; };:&quot;</span><span class="p">,</span> <span class="s2">&quot;mkfs&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">d</span> <span class="ow">in</span> <span class="n">command</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dangerous</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Blocked dangerous command.&quot;</span><span class="p">}</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">proc</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_subprocess_shell</span><span class="p">(</span>
                <span class="n">command</span><span class="p">,</span>
                <span class="n">stdout</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                <span class="n">stderr</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                <span class="n">cwd</span><span class="o">=</span><span class="n">cwd</span>
            <span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span>
                    <span class="n">proc</span><span class="o">.</span><span class="n">communicate</span><span class="p">(),</span> 
                    <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
                <span class="n">proc</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
                <span class="k">await</span> <span class="n">proc</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
                <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Timeout after </span><span class="si">{</span><span class="n">timeout</span><span class="si">}</span><span class="s2">s.&quot;</span><span class="p">}</span>

            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="n">proc</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;exit_code&quot;</span><span class="p">:</span> <span class="n">proc</span><span class="o">.</span><span class="n">returncode</span><span class="p">,</span>
                <span class="s2">&quot;stdout&quot;</span><span class="p">:</span> <span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">),</span>
                <span class="s2">&quot;stderr&quot;</span><span class="p">:</span> <span class="n">stderr</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)}</span>

    <span class="nd">@mcp</span><span class="o">.</span><span class="n">tool</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_system_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Collect system information&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">cmds</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;uname&quot;</span><span class="p">:</span> <span class="s2">&quot;uname -a&quot;</span><span class="p">,</span>
            <span class="s2">&quot;uptime&quot;</span><span class="p">:</span> <span class="s2">&quot;uptime&quot;</span><span class="p">,</span>
            <span class="s2">&quot;memory&quot;</span><span class="p">:</span> <span class="s2">&quot;free -h&quot;</span><span class="p">,</span>
            <span class="s2">&quot;disk&quot;</span><span class="p">:</span> <span class="s2">&quot;df -h&quot;</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">cmds</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">proc</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_subprocess_shell</span><span class="p">(</span>
                    <span class="n">cmd</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
                <span class="p">)</span>
                <span class="n">out</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="k">await</span> <span class="n">proc</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
                <span class="n">info</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">info</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="n">info</span>
</code></pre></div>
<hr />
<h2 id="best-practices">Best Practices</h2>
<h3 id="tool-usage">Tool Usage</h3>
<ul>
<li>Use <code>get_system_info</code> for quick system overview</li>
<li>Use <code>execute_command</code> for custom or complex operations</li>
<li>Check <code>success</code> field and <code>exit_code</code> to detect errors</li>
<li>Parse <code>stdout</code> for structured data when possible</li>
<li>Set timeouts appropriately to prevent hung processes</li>
</ul>
<h3 id="security">Security</h3>
<div class="admonition warning">
<p class="admonition-title">Security Best Practices</p>
<p>The MCP server has built-in protections, but be cautious:</p>
<ul>
<li>Dangerous commands are automatically blocked</li>
<li>Commands execute with user permissions only</li>
<li>Avoid sudo when possible (requires user interaction)</li>
<li>Sanitize outputs before logging (may contain sensitive data)</li>
</ul>
</div>
<h3 id="error-handling_1">Error Handling</h3>
<ul>
<li>Check <code>success</code> field before considering command successful</li>
<li>Parse <code>stderr</code> for error messages</li>
<li>Implement retries for transient errors</li>
<li>Provide alternatives when primary approach fails</li>
</ul>
<h2 id="comparison-with-other-agent-commands">Comparison with Other Agent Commands</h2>
<table>
<thead>
<tr>
<th>Agent</th>
<th>Command Types</th>
<th>Execution Layer</th>
<th>Result Format</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>LinuxAgent</strong></td>
<td>CLI + SysInfo</td>
<td>MCP server</td>
<td>success/exit_code/stdout/stderr</td>
</tr>
<tr>
<td><strong>AppAgent</strong></td>
<td>UI + API</td>
<td>Automator + MCP</td>
<td>UI state + API responses</td>
</tr>
<tr>
<td><strong>HostAgent</strong></td>
<td>Desktop + Shell</td>
<td>Automator + MCP</td>
<td>Desktop state + results</td>
</tr>
</tbody>
</table>
<p>LinuxAgent's command set is intentionally minimal and focused:</p>
<ul>
<li><strong>execute_command</strong>: General-purpose command execution</li>
<li><strong>get_system_info</strong>: Standardized system information</li>
</ul>
<p>This simplicity reflects the CLI environment's text-based, command-driven nature.</p>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="../state/">State Machine</a> - Understand how command execution fits into the FSM</li>
<li><a href="../strategy/">Processing Strategy</a> - See how commands are integrated into the 3-phase pipeline</li>
<li><a href="../overview/">Overview</a> - Return to LinuxAgent architecture overview</li>
<li><a href="../../mcp/overview/">MCP Overview</a> - MCP server implementation details</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../strategy/" class="btn btn-neutral float-left" title="Processing Strategy"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../mobile/overview/" class="btn btn-neutral float-right" title="Overview">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../strategy/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../mobile/overview/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
      <script src="../../javascripts/mermaid-init.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
