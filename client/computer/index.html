<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Computer - UFO³ Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Computer";
        var mkdocs_page_input_path = "client/computer.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> UFO³ Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../choose_path/">Choose Your Path</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../project_directory_structure/">Project Directory Structure</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/quick_start_galaxy/">Quick Start (UFO³ Agent Galaxy)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/quick_start_ufo2/">Quick Start (UFO²)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/quick_start_linux/">Quick Start (Linux Agent)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/quick_start_mobile/">Quick Start (Mobile Agent)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/migration_ufo2_to_galaxy/">Migration UFO² → UFO³</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/more_guidance/">More Guidance</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Configuration & Setup</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Configuration System</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/agents_config/">Agent Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/system_config/">System Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/rag_config/">RAG Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/prices_config/">Pricing Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/third_party_config/">Third-Party Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/mcp_reference/">MCP Reference</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/migration/">Migration Guide</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/system/extending/">Extending Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Galaxy Configuration</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../configuration/system/galaxy_devices/">Devices</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../configuration/system/galaxy_constellation/">Constellation</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../configuration/system/galaxy_agent/">Agent</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Model Setup</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/openai/">OpenAI</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/azure_openai/">Azure OpenAI</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/operator/">OpenAI CUA (Operator)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/gemini/">Gemini</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/claude/">Claude</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/qwen/">Qwen</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/deepseek/">DeepSeek</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/ollama/">Ollama</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../configuration/models/custom_model/">Custom Model</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">UFO³ Agent Galaxy</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../galaxy/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../galaxy/webui/">WebUI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Galaxy Client</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/constellation_client/">ConstellationClient</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/device_manager/">DeviceManager</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/components/">Components</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/aip_integration/">AIP Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/client/galaxy_client/">GalaxyClient</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Agent Registration</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/agent_registration/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/agent_registration/agent_profile/">Agent Profile</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/agent_registration/device_registry/">Device Registry</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/agent_registration/registration_flow/">Registration Flow</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Task Constellation (DAG)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/task_star/">TaskStar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/task_star_line/">TaskStarLine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/task_constellation/">TaskConstellation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation/constellation_editor/">ConstellationEditor</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Constellation Agent</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_agent/state/">State Machine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_agent/strategy/">Strategy Pattern</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_agent/command/">MCP Commands</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Constellation Orchestrator</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/event_driven_coordination/">Event-Driven Coordination</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/asynchronous_scheduling/">Asynchronous Scheduling</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/safe_assignment_locking/">Safe Assignment Locking</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/consistency_guarantees/">Consistency Guarantees</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/batched_editing/">Batched Editing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/constellation_manager/">Constellation Manager</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/constellation_orchestrator/api_reference/">API Reference</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Observer System</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/event_system/">Event System</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/progress_observer/">Progress Observer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/agent_output_observer/">Agent Output Observer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/synchronizer/">Synchronizer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/metrics_observer/">Metrics Observer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/observer/visualization_observer/">Visualization Observer</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Evaluation & Logging</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/evaluation/trajectory_report/">Trajectory Report</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/evaluation/performance_metrics/">Performance Metrics</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../galaxy/evaluation/result_json/">Result JSON Reference</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">UFO² Desktop AgentOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../ufo2/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ufo2/as_galaxy_device/">Using as Galaxy Device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >HostAgent</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/host_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/host_agent/state/">State Machine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/host_agent/strategy/">Processing Strategy</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/host_agent/commands/">Command System</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >AppAgent</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/app_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/app_agent/state/">State Machine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/app_agent/strategy/">Processing Strategy</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/app_agent/commands/">Command System</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Core Features</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/core_features/hybrid_actions/">Hybrid GUI–API Actions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Control Detection</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/control_detection/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/control_detection/uia_detection/">UIA Detection</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/control_detection/visual_detection/">Visual Detection</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/control_detection/hybrid_detection/">Hybrid Detection</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Knowledge Substrate</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/learning_from_help_document/">Help Documents</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/learning_from_bing_search/">Bing Search</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/experience_learning/">Experience Learning</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/core_features/knowledge_substrate/learning_from_demonstration/">Demos</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/core_features/multi_action/">Speculative Multi-Action</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Advanced Usage</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/advanced_usage/follower_mode/">Follower Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/advanced_usage/batch_mode/">Batch Mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/advanced_usage/operator_as_app_agent/">Operator Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/advanced_usage/customization/">Customization</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Prompts</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/prompts/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/prompts/basic_template/">Basic Template</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/prompts/examples_prompts/">Examples</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Evaluation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/evaluation/evaluation_agent/">EvaluationAgent</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/evaluation/benchmark/overview/">Benchmark Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/evaluation/benchmark/windows_agent_arena/">Windows Agent Arena</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/evaluation/benchmark/osworld/">OSWorld (Windows)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Performance Logs</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/overview/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/evaluation_logs/">Evaluation Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/markdown_log_viewer/">Markdown Log Viewer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/request_logs/">Request Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/screenshots_logs/">Screenshots Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/step_logs/">Step Logs</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../ufo2/evaluation/logs/ui_tree_logs/">UI Tree Logs</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Dataflow</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/instantiation/">Instantiation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/execution/">Execution</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/windows_app_env/">Windows App Environment</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../ufo2/dataflow/result/">Result</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Linux Agent</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/as_galaxy_device/">Using as Galaxy Device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/state/">State Machine</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/strategy/">Processing Strategy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../linux/commands/">MCP Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mobile Agent</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/as_galaxy_device/">Using as Galaxy Device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/state/">State Machine</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/strategy/">Processing Strategy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mobile/commands/">MCP Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials & Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/creating_mcp_servers/">Creating Custom MCP Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorials/creating_third_party_agents/">Creating Custom Third-Party Agents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Creating Custom Device Agents</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/">Index</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/client_setup/">Client Setup</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/core_components/">Core Components</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/mcp_server/">MCP Server</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/configuration/">Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/testing/">Testing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_device_agent/example_mobile_agent/">Example Mobile Agent</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Enhancing AppAgent Capabilities</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_app_agent/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_app_agent/help_document_provision/">Help Document Provision</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_app_agent/demonstration_provision/">Demonstration Provision</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/creating_app_agent/warpping_app_native_api/">Wrapping App-Native APIs</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Infrastructure</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Basic Modules</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/session/">Session</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/round/">Round</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/context/">Context</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/dispatcher/">Dispatcher</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/session_pool/">Session Factory & Pool</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/modules/platform_sessions/">Platform Sessions</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Device Agent Architecture</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/agents/overview/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/agents/agent_types/">Agent Types & Implementation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../infrastructure/agents/server_client_architecture/">Server-Client Architecture</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Architecture Layers</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/state/">State Layer (Level-1)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/processor/">Strategy Layer (Level-2)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/strategy/">Strategy Components</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/command/">Command Layer (Level-3)</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Supporting Systems</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/memory/">Memory System</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/blackboard/">Blackboard</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../infrastructure/agents/design/prompter/">Prompter</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agent Interaction Protocol (AIP)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/messages/">Message Reference</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/protocols/">Protocol Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/transport/">Transport Layer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/endpoints/">Endpoints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../aip/resilience/">Resilience</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agent Server</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/quick_start/">Quick Start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/session_manager/">Session Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/websocket_handler/">WebSocket Handler</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/client_connection_manager/">Client Connection Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/api/">HTTP API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../server/monitoring/">Monitoring</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agent Client</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../quick_start/">Quick Start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../websocket_client/">WebSocket Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ufo_client/">UFO Client</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../computer_manager/">Computer Manager</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Computer</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#architecture-overview">Architecture Overview</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#key-responsibilities">Key Responsibilities</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#table-of-contents">Table of Contents</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#core-components">Core Components</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-computer-class">1. Computer Class</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#key-attributes">Key Attributes</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#tool-namespaces">Tool Namespaces</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-computermanager-class">2. ComputerManager Class</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#computer-instance-key">Computer Instance Key</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#configuration-structure">Configuration Structure</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-commandrouter-class">3. CommandRouter Class</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#execution-flow">Execution Flow</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#initialization">Initialization</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#computer-initialization">Computer Initialization</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#computermanager-initialization">ComputerManager Initialization</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tool-execution">Tool Execution</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#basic-tool-execution">Basic Tool Execution</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#command-to-tool-conversion">Command to Tool Conversion</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#batch-tool-execution">Batch Tool Execution</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#thread-isolation-timeout">Thread Isolation &amp; Timeout</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#why-thread-isolation">Why Thread Isolation?</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#implementation-details">Implementation Details</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#meta-tools">Meta Tools</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#registering-meta-tools">Registering Meta Tools</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#using-meta-tools">Using Meta Tools</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dynamic-server-management">Dynamic Server Management</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#adding-a-server">Adding a Server</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#removing-a-server">Removing a Server</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#command-routing">Command Routing</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#basic-usage">Basic Usage</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#error-handling">Error Handling</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tool-registry">Tool Registry</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#tool-key-format">Tool Key Format</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#accessing-tools">Accessing Tools</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#best-practices">Best Practices</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#performance-optimization">Performance Optimization</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#common-pitfalls">Common Pitfalls</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#error-handling_1">Error Handling</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#tool-execution-errors">Tool Execution Errors</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configuration-errors">Configuration Errors</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#integration-points">Integration Points</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#with-ufo-client">With UFO Client</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#with-mcp-server-manager">With MCP Server Manager</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#related-documentation">Related Documentation</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../device_info/">Device Info Provider</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mcp_integration/">MCP Integration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">MCP (Model Context Protocol)</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/data_collection/">Data Collection Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/action/">Action Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/configuration/">Configuration Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/local_servers/">Local Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mcp/remote_servers/">Remote Servers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Server Reference</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/ui_collector/">UICollector</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/host_ui_executor/">HostUIExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/app_ui_executor/">AppUIExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/command_line_executor/">CommandLineExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/word_com_executor/">WordCOMExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/excel_com_executor/">ExcelCOMExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/ppt_com_executor/">PowerPointCOMExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/pdf_reader_executor/">PDFReaderExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/constellation_editor/">ConstellationEditor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/hardware_executor/">HardwareExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/bash_executor/">BashExecutor</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mcp/servers/mobile_executor/">MobileExecutor</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/CONTRIBUTING/">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/LICENSE/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/CODE_OF_CONDUCT/">Code of Conduct</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/DISCLAIMER/">Disclaimer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/SUPPORT/">Support</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">UFO³ Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Agent Client</li>
      <li class="breadcrumb-item active">Computer</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="computer">Computer</h1>
<p>The <strong>Computer</strong> class is the core execution layer of the UFO client. It manages MCP (Model Context Protocol) tool execution, maintains tool registries, and provides thread-isolated execution for reliability. Each Computer instance represents a distinct execution context with its own namespace and resource management.</p>
<h2 id="architecture-overview">Architecture Overview</h2>
<p>The Computer layer provides the execution engine for MCP tools with three main components:</p>
<div class="mermaid">graph TB
    CommandRouter["CommandRouter&lt;br/&gt;Command Routing"]
    ComputerManager["ComputerManager&lt;br/&gt;Instance Management"]
    Computer["Computer&lt;br/&gt;Core Execution Layer"]
    MCPServerManager["MCP Server Manager&lt;br/&gt;Process Isolation"]

    CommandRouter --&gt;|Routes To| ComputerManager
    ComputerManager --&gt;|Creates &amp; Manages| Computer
    Computer --&gt;|Data Collection| DataServers["Data Collection Servers&lt;br/&gt;screenshot, ui_detection, etc."]
    Computer --&gt;|Actions| ActionServers["Action Servers&lt;br/&gt;gui_automation, file_operations, etc."]
    Computer --&gt;|Uses| ToolsRegistry["Tools Registry&lt;br/&gt;tool_type::tool_name → MCPToolCall"]
    Computer --&gt;|Provides| MetaTools["Meta Tools&lt;br/&gt;list_tools built-in introspection"]
    Computer --&gt;|Delegates To| MCPServerManager</div>
<p><strong>Computer</strong> manages MCP tool execution with thread isolation and timeout control (6000-second timeout, 10-worker thread pool).<br />
<strong>ComputerManager</strong> handles multiple Computer instances with namespace-based routing.<br />
<strong>CommandRouter</strong> routes and executes commands across Computer instances with early-exit support.</p>
<h3 id="key-responsibilities">Key Responsibilities</h3>
<ul>
<li><strong>Tool Registration</strong>: Register tools from multiple MCP servers with namespace isolation</li>
<li><strong>Command Routing</strong>: Convert high-level commands to MCP tool calls</li>
<li><strong>Execution Management</strong>: Execute tools in isolated thread pools with timeout protection</li>
<li><strong>Meta Tools</strong>: Provide introspection capabilities (e.g., <code>list_tools</code>)</li>
</ul>
<h2 id="table-of-contents">Table of Contents</h2>
<h2 id="core-components">Core Components</h2>
<h3 id="1-computer-class">1. Computer Class</h3>
<p>The <code>Computer</code> class manages a single logical computer with its own set of MCP servers and tools.</p>
<h4 id="key-attributes">Key Attributes</h4>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_name</code></td>
<td><code>str</code></td>
<td>Unique identifier for the computer instance</td>
</tr>
<tr>
<td><code>_process_name</code></td>
<td><code>str</code></td>
<td>Associated process name for MCP server isolation</td>
</tr>
<tr>
<td><code>_data_collection_servers</code></td>
<td><code>Dict[str, BaseMCPServer]</code></td>
<td>Servers for data collection (screenshot, UI detection, etc.)</td>
</tr>
<tr>
<td><code>_action_servers</code></td>
<td><code>Dict[str, BaseMCPServer]</code></td>
<td>Servers for actions (GUI automation, file operations, etc.)</td>
</tr>
<tr>
<td><code>_tools_registry</code></td>
<td><code>Dict[str, MCPToolCall]</code></td>
<td>Registry of all available tools (key: <code>tool_type::tool_name</code>)</td>
</tr>
<tr>
<td><code>_meta_tools</code></td>
<td><code>Dict[str, Callable]</code></td>
<td>Built-in introspection tools</td>
</tr>
<tr>
<td><code>_executor</code></td>
<td><code>ThreadPoolExecutor</code></td>
<td>Thread pool for isolated tool execution (10 workers)</td>
</tr>
<tr>
<td><code>_tool_timeout</code></td>
<td><code>int</code></td>
<td>Tool execution timeout (6000 seconds = 100 minutes)</td>
</tr>
</tbody>
</table>
<h4 id="tool-namespaces">Tool Namespaces</h4>
<p>Computer supports two types of tool namespaces:</p>
<ul>
<li><strong><code>data_collection</code></strong>: Tools for gathering information (non-destructive operations)</li>
<li><strong><code>action</code></strong>: Tools for performing actions (state-changing operations)</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># Tool key format: &quot;tool_type::tool_name&quot;</span>
<span class="s2">&quot;data_collection::screenshot&quot;</span>      <span class="c1"># Take screenshot</span>
<span class="s2">&quot;data_collection::ui_detection&quot;</span>    <span class="c1"># Detect UI elements</span>
<span class="s2">&quot;action::click&quot;</span>                    <span class="c1"># Click UI element</span>
<span class="s2">&quot;action::type_text&quot;</span>                <span class="c1"># Type text</span>
</code></pre></div>
<blockquote>
<p><strong>Note:</strong> Different namespaces allow the same tool name to exist in both data collection and action contexts. For example, both <code>data_collection::get_file_info</code> and <code>action::get_file_info</code> can coexist.</p>
</blockquote>
<h3 id="2-computermanager-class">2. ComputerManager Class</h3>
<p>The <code>ComputerManager</code> creates and manages multiple <code>Computer</code> instances based on agent configurations.</p>
<h4 id="computer-instance-key">Computer Instance Key</h4>
<p>Each computer instance is identified by a unique key:</p>
<div class="highlight"><pre><span></span><code><span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">agent_name</span><span class="si">}</span><span class="s2">::</span><span class="si">{</span><span class="n">process_name</span><span class="si">}</span><span class="s2">::</span><span class="si">{</span><span class="n">root_name</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;host_agent::chrome::default&quot;</span>        <span class="c1"># Default chrome computer for host_agent</span>
<span class="s2">&quot;host_agent::vscode::custom_config&quot;</span>  <span class="c1"># Custom VSCode computer for host_agent</span>
</code></pre></div></p>
<h4 id="configuration-structure">Configuration Structure</h4>
<div class="highlight"><pre><span></span><code><span class="nt">mcp</span><span class="p">:</span>
<span class="w">  </span><span class="nt">host_agent</span><span class="p">:</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span>
<span class="w">      </span><span class="nt">data_collection</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;screenshot&quot;</span>
<span class="w">          </span><span class="nt">server_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;local&quot;</span>
<span class="w">          </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ufo.client.mcp.local_servers.screenshot&quot;</span>
<span class="w">          </span><span class="nt">reset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ui_detection&quot;</span>
<span class="w">          </span><span class="nt">server_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;local&quot;</span>
<span class="w">          </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ufo.client.mcp.local_servers.ui_detection&quot;</span>
<span class="w">          </span><span class="nt">reset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">action</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gui_automation&quot;</span>
<span class="w">          </span><span class="nt">server_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;local&quot;</span>
<span class="w">          </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ufo.client.mcp.local_servers.gui_automation&quot;</span>
<span class="w">          </span><span class="nt">reset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
<p><strong>Configuration Requirements</strong></p>
<ul>
<li>Each agent must have at least a <code>default</code> root configuration</li>
<li>If <code>root_name</code> is not found, the manager falls back to <code>default</code></li>
<li>Missing configurations will raise a <code>ValueError</code></li>
</ul>
<h3 id="3-commandrouter-class">3. CommandRouter Class</h3>
<p>The <code>CommandRouter</code> executes commands on the appropriate <code>Computer</code> instance by routing through the <code>ComputerManager</code>.</p>
<h4 id="execution-flow">Execution Flow</h4>
<div class="mermaid">graph LR
    Command --&gt; CommandRouter
    CommandRouter --&gt; ComputerManager
    ComputerManager --&gt;|get_or_create| Computer
    Computer --&gt;|command2tool| ToolCall[MCPToolCall]
    ToolCall --&gt;|run_actions| Result[MCP Tool Result]</div>
<h2 id="initialization">Initialization</h2>
<h3 id="computer-initialization">Computer Initialization</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">ufo.client.computer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Computer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ufo.client.mcp.mcp_server_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">MCPServerManager</span>

<span class="c1"># Create MCP server manager</span>
<span class="n">mcp_manager</span> <span class="o">=</span> <span class="n">MCPServerManager</span><span class="p">()</span>

<span class="c1"># Initialize computer</span>
<span class="n">computer</span> <span class="o">=</span> <span class="n">Computer</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_computer&quot;</span><span class="p">,</span>
    <span class="n">process_name</span><span class="o">=</span><span class="s2">&quot;my_process&quot;</span><span class="p">,</span>
    <span class="n">mcp_server_manager</span><span class="o">=</span><span class="n">mcp_manager</span><span class="p">,</span>
    <span class="n">data_collection_servers_config</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;namespace&quot;</span><span class="p">:</span> <span class="s2">&quot;screenshot&quot;</span><span class="p">,</span>
            <span class="s2">&quot;server_type&quot;</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span>
            <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;ufo.client.mcp.local_servers.screenshot&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="n">action_servers_config</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;namespace&quot;</span><span class="p">:</span> <span class="s2">&quot;gui_automation&quot;</span><span class="p">,</span>
            <span class="s2">&quot;server_type&quot;</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span>
            <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;ufo.client.mcp.local_servers.gui_automation&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Async initialization (required)</span>
<span class="k">await</span> <span class="n">computer</span><span class="o">.</span><span class="n">async_init</span><span class="p">()</span>
</code></pre></div>
<blockquote>
<p><strong>⚠️ Important:</strong> You <strong>must</strong> call <code>await computer.async_init()</code> after creating a <code>Computer</code> instance. This registers all MCP servers and their tools asynchronously.</p>
</blockquote>
<h3 id="computermanager-initialization">ComputerManager Initialization</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">ufo.client.computer</span><span class="w"> </span><span class="kn">import</span> <span class="n">ComputerManager</span>

<span class="c1"># Load configuration</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config.yaml&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">configs</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># Create manager</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">ComputerManager</span><span class="p">(</span>
    <span class="n">configs</span><span class="o">=</span><span class="n">configs</span><span class="p">,</span>
    <span class="n">mcp_server_manager</span><span class="o">=</span><span class="n">mcp_manager</span>
<span class="p">)</span>

<span class="c1"># Get or create computer instance</span>
<span class="n">computer</span> <span class="o">=</span> <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
    <span class="n">agent_name</span><span class="o">=</span><span class="s2">&quot;host_agent&quot;</span><span class="p">,</span>
    <span class="n">process_name</span><span class="o">=</span><span class="s2">&quot;chrome&quot;</span><span class="p">,</span>
    <span class="n">root_name</span><span class="o">=</span><span class="s2">&quot;default&quot;</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="tool-execution">Tool Execution</h2>
<h3 id="basic-tool-execution">Basic Tool Execution</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">aip.messages</span><span class="w"> </span><span class="kn">import</span> <span class="n">MCPToolCall</span>

<span class="c1"># Create tool call</span>
<span class="n">tool_call</span> <span class="o">=</span> <span class="n">MCPToolCall</span><span class="p">(</span>
    <span class="n">tool_key</span><span class="o">=</span><span class="s2">&quot;data_collection::screenshot&quot;</span><span class="p">,</span>
    <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;screenshot&quot;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="s2">&quot;full_screen&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Execute tool</span>
<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">computer</span><span class="o">.</span><span class="n">run_actions</span><span class="p">([</span><span class="n">tool_call</span><span class="p">])</span>

<span class="c1"># Check result</span>
<span class="k">if</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_error</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Success: </span><span class="si">{</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="command-to-tool-conversion">Command to Tool Conversion</h3>
<p>The <code>command2tool()</code> method converts high-level <code>Command</code> objects to <code>MCPToolCall</code> objects:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">aip.messages</span><span class="w"> </span><span class="kn">import</span> <span class="n">Command</span>

<span class="c1"># Create command</span>
<span class="n">command</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span>
    <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;screenshot&quot;</span><span class="p">,</span>
    <span class="n">tool_type</span><span class="o">=</span><span class="s2">&quot;data_collection&quot;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;region&quot;</span><span class="p">:</span> <span class="s2">&quot;active_window&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Convert to tool call</span>
<span class="n">tool_call</span> <span class="o">=</span> <span class="n">computer</span><span class="o">.</span><span class="n">command2tool</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

<span class="c1"># Execute</span>
<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">computer</span><span class="o">.</span><span class="n">run_actions</span><span class="p">([</span><span class="n">tool_call</span><span class="p">])</span>
</code></pre></div>
<p>If <code>tool_type</code> is not specified in the command, the <code>command2tool()</code> method will automatically detect whether the tool is registered as <code>data_collection</code> or <code>action</code>.</p>
<h3 id="batch-tool-execution">Batch Tool Execution</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Execute multiple tools sequentially</span>
<span class="n">tool_calls</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">MCPToolCall</span><span class="p">(</span><span class="n">tool_key</span><span class="o">=</span><span class="s2">&quot;data_collection::screenshot&quot;</span><span class="p">,</span> <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;screenshot&quot;</span><span class="p">),</span>
    <span class="n">MCPToolCall</span><span class="p">(</span><span class="n">tool_key</span><span class="o">=</span><span class="s2">&quot;data_collection::ui_detection&quot;</span><span class="p">,</span> <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;detect_ui&quot;</span><span class="p">),</span>
    <span class="n">MCPToolCall</span><span class="p">(</span><span class="n">tool_key</span><span class="o">=</span><span class="s2">&quot;action::click&quot;</span><span class="p">,</span> <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">})</span>
<span class="p">]</span>

<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">computer</span><span class="o">.</span><span class="n">run_actions</span><span class="p">(</span><span class="n">tool_calls</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="s1">&#39;Success&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">result</span><span class="o">.</span><span class="n">is_error</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;Failed&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="thread-isolation-timeout">Thread Isolation &amp; Timeout</h2>
<h3 id="why-thread-isolation">Why Thread Isolation?</h3>
<p>MCP tools may contain <strong>blocking operations</strong> (e.g., <code>time.sleep()</code>, synchronous I/O) that can block the event loop and cause WebSocket disconnections. To prevent this:</p>
<ol>
<li>Each tool call runs in a <strong>separate thread</strong> with its own event loop</li>
<li>The thread pool has <strong>10 concurrent workers</strong></li>
<li>Each tool call has a <strong>timeout of 6000 seconds</strong> (100 minutes)</li>
</ol>
<h3 id="implementation-details">Implementation Details</h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">_call_tool_in_thread</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute MCP tool call in isolated thread with its own event loop.&quot;&quot;&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>
    <span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_do_call</span><span class="p">():</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">Client</span><span class="p">(</span><span class="n">server</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">call_tool</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">tool_name</span><span class="p">,</span>
                    <span class="n">arguments</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                    <span class="n">raise_on_error</span><span class="o">=</span><span class="kc">False</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">_do_call</span><span class="p">())</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Execute in thread pool with timeout</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_executor</span><span class="p">,</span> <span class="n">_call_tool_in_thread</span><span class="p">),</span>
    <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_tool_timeout</span>
<span class="p">)</span>
</code></pre></div>
<p>If a tool execution exceeds 6000 seconds, it will be cancelled and return a timeout error:</p>
<div class="highlight"><pre><span></span><code><span class="n">CallToolResult</span><span class="p">(</span>
    <span class="n">is_error</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">content</span><span class="o">=</span><span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Tool execution timed out after 6000s&quot;</span><span class="p">)]</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="meta-tools">Meta Tools</h2>
<p>Meta tools are <strong>built-in introspection tools</strong> that provide information about the computer's capabilities.</p>
<h3 id="registering-meta-tools">Registering Meta Tools</h3>
<p>Use the <code>@Computer.meta_tool()</code> decorator to register a method as a meta tool:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Computer</span><span class="p">:</span>
    <span class="nd">@meta_tool</span><span class="p">(</span><span class="s2">&quot;list_tools&quot;</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_tools</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tool_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">remove_meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CallToolResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;List all available tools.&quot;&quot;&quot;</span>
        <span class="c1"># Implementation...</span>
</code></pre></div>
<h3 id="using-meta-tools">Using Meta Tools</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># List all action tools</span>
<span class="n">tool_call</span> <span class="o">=</span> <span class="n">MCPToolCall</span><span class="p">(</span>
    <span class="n">tool_key</span><span class="o">=</span><span class="s2">&quot;action::list_tools&quot;</span><span class="p">,</span>
    <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;list_tools&quot;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;tool_type&quot;</span><span class="p">:</span> <span class="s2">&quot;action&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">computer</span><span class="o">.</span><span class="n">run_actions</span><span class="p">([</span><span class="n">tool_call</span><span class="p">])</span>
<span class="n">tools</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>  <span class="c1"># List of available action tools</span>
</code></pre></div>
<p><strong>Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># List all tools in &quot;screenshot&quot; namespace</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">computer</span><span class="o">.</span><span class="n">run_actions</span><span class="p">([</span>
    <span class="n">MCPToolCall</span><span class="p">(</span>
        <span class="n">tool_key</span><span class="o">=</span><span class="s2">&quot;data_collection::list_tools&quot;</span><span class="p">,</span>
        <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;list_tools&quot;</span><span class="p">,</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;namespace&quot;</span><span class="p">:</span> <span class="s2">&quot;screenshot&quot;</span><span class="p">,</span> <span class="s2">&quot;remove_meta&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
    <span class="p">)</span>
<span class="p">])</span>

<span class="c1"># Returns: [{&quot;tool_name&quot;: &quot;take_screenshot&quot;, &quot;description&quot;: &quot;...&quot;, ...}]</span>
</code></pre></div>
<h2 id="dynamic-server-management">Dynamic Server Management</h2>
<h3 id="adding-a-server">Adding a Server</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">ufo.client.mcp.mcp_server_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseMCPServer</span>

<span class="c1"># Create new MCP server</span>
<span class="n">new_server</span> <span class="o">=</span> <span class="n">mcp_manager</span><span class="o">.</span><span class="n">create_or_get_server</span><span class="p">(</span>
    <span class="n">mcp_config</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;namespace&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_tools&quot;</span><span class="p">,</span>
        <span class="s2">&quot;server_type&quot;</span><span class="p">:</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span>
        <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;my_custom_mcp_server&quot;</span>
    <span class="p">},</span>
    <span class="n">reset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">process_name</span><span class="o">=</span><span class="s2">&quot;my_process&quot;</span>
<span class="p">)</span>

<span class="c1"># Add to computer</span>
<span class="k">await</span> <span class="n">computer</span><span class="o">.</span><span class="n">add_server</span><span class="p">(</span>
    <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;custom_tools&quot;</span><span class="p">,</span>
    <span class="n">mcp_server</span><span class="o">=</span><span class="n">new_server</span><span class="p">,</span>
    <span class="n">tool_type</span><span class="o">=</span><span class="s2">&quot;action&quot;</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="removing-a-server">Removing a Server</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Remove server and all its tools</span>
<span class="k">await</span> <span class="n">computer</span><span class="o">.</span><span class="n">delete_server</span><span class="p">(</span>
    <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;custom_tools&quot;</span><span class="p">,</span>
    <span class="n">tool_type</span><span class="o">=</span><span class="s2">&quot;action&quot;</span>
<span class="p">)</span>
</code></pre></div>
<p><strong>Use cases for dynamic server management:</strong></p>
<ul>
<li>Add specialized tools for specific tasks</li>
<li>Remove servers to reduce memory footprint</li>
<li>Hot-reload MCP servers during development</li>
</ul>
<h2 id="command-routing">Command Routing</h2>
<p>The <code>CommandRouter</code> orchestrates command execution across multiple computers.</p>
<h3 id="basic-usage">Basic Usage</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">ufo.client.computer</span><span class="w"> </span><span class="kn">import</span> <span class="n">CommandRouter</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">aip.messages</span><span class="w"> </span><span class="kn">import</span> <span class="n">Command</span><span class="p">,</span> <span class="n">Result</span>

<span class="c1"># Create router</span>
<span class="n">router</span> <span class="o">=</span> <span class="n">CommandRouter</span><span class="p">(</span><span class="n">computer_manager</span><span class="o">=</span><span class="n">manager</span><span class="p">)</span>

<span class="c1"># Execute commands</span>
<span class="n">commands</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Command</span><span class="p">(</span><span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;screenshot&quot;</span><span class="p">,</span> <span class="n">tool_type</span><span class="o">=</span><span class="s2">&quot;data_collection&quot;</span><span class="p">),</span>
    <span class="n">Command</span><span class="p">(</span><span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="n">tool_type</span><span class="o">=</span><span class="s2">&quot;action&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">})</span>
<span class="p">]</span>

<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">router</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">agent_name</span><span class="o">=</span><span class="s2">&quot;host_agent&quot;</span><span class="p">,</span>
    <span class="n">process_name</span><span class="o">=</span><span class="s2">&quot;chrome&quot;</span><span class="p">,</span>
    <span class="n">root_name</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="n">commands</span><span class="o">=</span><span class="n">commands</span><span class="p">,</span>
    <span class="n">early_exit</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Stop on first error</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Status: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="error-handling">Error Handling</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># early_exit=True: Stop on first error</span>
<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">router</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">agent_name</span><span class="o">=</span><span class="s2">&quot;host_agent&quot;</span><span class="p">,</span>
    <span class="n">process_name</span><span class="o">=</span><span class="s2">&quot;chrome&quot;</span><span class="p">,</span>
    <span class="n">root_name</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="n">commands</span><span class="o">=</span><span class="n">commands</span><span class="p">,</span>
    <span class="n">early_exit</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># early_exit=False: Execute all commands even if some fail</span>
<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">router</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">agent_name</span><span class="o">=</span><span class="s2">&quot;host_agent&quot;</span><span class="p">,</span>
    <span class="n">process_name</span><span class="o">=</span><span class="s2">&quot;chrome&quot;</span><span class="p">,</span>
    <span class="n">root_name</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="n">commands</span><span class="o">=</span><span class="n">commands</span><span class="p">,</span>
    <span class="n">early_exit</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</code></pre></div>
<blockquote>
<p><strong>⚠️ Warning:</strong> When <code>early_exit=True</code>, if a command fails, subsequent commands will <strong>not</strong> be executed, and their results will be set to <code>ResultStatus.SKIPPED</code>.</p>
</blockquote>
<h2 id="tool-registry">Tool Registry</h2>
<p>The tools registry maintains a mapping of all available tools.</p>
<h3 id="tool-key-format">Tool Key Format</h3>
<div class="highlight"><pre><span></span><code><span class="n">tool_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tool_type</span><span class="si">}</span><span class="s2">::</span><span class="si">{</span><span class="n">tool_name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># Examples:</span>
<span class="s2">&quot;data_collection::screenshot&quot;</span>
<span class="s2">&quot;action::click&quot;</span>
<span class="s2">&quot;data_collection::list_tools&quot;</span>  <span class="c1"># Meta tool</span>
</code></pre></div>
<h3 id="accessing-tools">Accessing Tools</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Get tool info</span>
<span class="n">tool_info</span> <span class="o">=</span> <span class="n">computer</span><span class="o">.</span><span class="n">_tools_registry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;action::click&quot;</span><span class="p">)</span>

<span class="c1"># Tool info contains:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tool_info</span><span class="o">.</span><span class="n">tool_name</span><span class="p">)</span>      <span class="c1"># &quot;click&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tool_info</span><span class="o">.</span><span class="n">tool_type</span><span class="p">)</span>      <span class="c1"># &quot;action&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tool_info</span><span class="o">.</span><span class="n">namespace</span><span class="p">)</span>      <span class="c1"># e.g., &quot;gui_automation&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tool_info</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>    <span class="c1"># Tool description</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tool_info</span><span class="o">.</span><span class="n">input_schema</span><span class="p">)</span>   <span class="c1"># JSON schema for input parameters</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tool_info</span><span class="o">.</span><span class="n">mcp_server</span><span class="p">)</span>     <span class="c1"># Reference to MCP server</span>
</code></pre></div>
<h2 id="best-practices">Best Practices</h2>
<h3 id="configuration">Configuration</h3>
<ol>
<li><strong>Use namespaces wisely</strong>: Group related tools under meaningful namespaces</li>
<li><strong>Separate concerns</strong>: Use <code>data_collection</code> for read-only operations, <code>action</code> for state changes</li>
<li><strong>Configure timeouts</strong>: Adjust <code>_tool_timeout</code> for long-running operations</li>
<li><strong>Use default root</strong>: Always provide a <code>default</code> root configuration as fallback</li>
</ol>
<h3 id="performance-optimization">Performance Optimization</h3>
<ol>
<li><strong>Register servers in parallel</strong>: The <code>async_init()</code> method already does this via <code>asyncio.gather()</code></li>
<li><strong>Reuse Computer instances</strong>: Let <code>ComputerManager</code> cache instances rather than creating new ones</li>
<li><strong>Limit concurrent tools</strong>: The thread pool has 10 workers; excessive parallel tools may queue</li>
<li><strong>Reset servers carefully</strong>: Setting <code>reset=True</code> in server config will restart the MCP server process</li>
</ol>
<h3 id="common-pitfalls">Common Pitfalls</h3>
<blockquote>
<p><strong>⚠️ Important:</strong> Avoid these common mistakes:
- <strong>Forgetting <code>async_init()</code></strong>: Always call after creating a <code>Computer</code> instance
- <strong>Tool key collisions</strong>: Ensure tool names are unique within each <code>tool_type</code>
- <strong>Timeout too short</strong>: Some operations (e.g., file downloads) may need longer timeouts
- <strong>Blocking in meta tools</strong>: Meta tools should be fast; avoid I/O operations</p>
</blockquote>
<h2 id="error-handling_1">Error Handling</h2>
<h3 id="tool-execution-errors">Tool Execution Errors</h3>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">computer</span><span class="o">.</span><span class="n">run_actions</span><span class="p">([</span><span class="n">tool_call</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_error</span><span class="p">:</span>
        <span class="n">error_message</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool error: </span><span class="si">{</span><span class="n">error_message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tool not registered: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tool execution timed out&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="configuration-errors">Configuration Errors</h3>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="n">computer</span> <span class="o">=</span> <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
        <span class="n">agent_name</span><span class="o">=</span><span class="s2">&quot;host_agent&quot;</span><span class="p">,</span>
        <span class="n">process_name</span><span class="o">=</span><span class="s2">&quot;chrome&quot;</span><span class="p">,</span>
        <span class="n">root_name</span><span class="o">=</span><span class="s2">&quot;invalid_root&quot;</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configuration error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Fallback to default</span>
    <span class="n">computer</span> <span class="o">=</span> <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
        <span class="n">agent_name</span><span class="o">=</span><span class="s2">&quot;host_agent&quot;</span><span class="p">,</span>
        <span class="n">process_name</span><span class="o">=</span><span class="s2">&quot;chrome&quot;</span><span class="p">,</span>
        <span class="n">root_name</span><span class="o">=</span><span class="s2">&quot;default&quot;</span>
    <span class="p">)</span>
</code></pre></div>
<h2 id="integration-points">Integration Points</h2>
<h3 id="with-ufo-client">With UFO Client</h3>
<p>The <code>Computer</code> is created and managed by the <code>UFOClient</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In UFOClient</span>
<span class="bp">self</span><span class="o">.</span><span class="n">command_router</span> <span class="o">=</span> <span class="n">CommandRouter</span><span class="p">(</span><span class="n">computer_manager</span><span class="p">)</span>

<span class="c1"># Execute commands from server</span>
<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_router</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">agent_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">agent_name</span><span class="p">,</span>
    <span class="n">process_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">process_name</span><span class="p">,</span>
    <span class="n">root_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root_name</span><span class="p">,</span>
    <span class="n">commands</span><span class="o">=</span><span class="n">command_list</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="with-mcp-server-manager">With MCP Server Manager</h3>
<p>The <code>Computer</code> relies on <code>MCPServerManager</code> for server lifecycle management:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create or get existing MCP server</span>
<span class="n">mcp_server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcp_server_manager</span><span class="o">.</span><span class="n">create_or_get_server</span><span class="p">(</span>
    <span class="n">mcp_config</span><span class="o">=</span><span class="n">server_config</span><span class="p">,</span>
    <span class="n">reset</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">process_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_process_name</span>
<span class="p">)</span>
</code></pre></div>
<p>See <a href="../mcp_integration/">MCP Integration</a> for more details on MCP server management.</p>
<h2 id="related-documentation">Related Documentation</h2>
<ul>
<li><a href="../overview/">UFO Client Overview</a> - High-level client architecture</li>
<li><a href="../ufo_client/">UFO Client</a> - Command execution orchestration</li>
<li><a href="../computer_manager/">Computer Manager</a> - Multi-computer instance management</li>
<li><a href="../mcp_integration/">MCP Integration</a> - MCP server details</li>
<li><a href="../../aip/messages/">AIP Messages</a> - Command and Result message formats</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../computer_manager/" class="btn btn-neutral float-left" title="Computer Manager"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../device_info/" class="btn btn-neutral float-right" title="Device Info Provider">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../computer_manager/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../device_info/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
      <script src="../../javascripts/mermaid-init.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
